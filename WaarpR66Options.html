<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="generator" content="Site Studio 6 (www.effectivestudios.com)" />
<meta name="robots" content="index,follow" />
<meta name="description" content="Waarp project" />
<meta name="keywords" content="bregier, fichier, file, frederic, gateway, goldengate, http, java, libre, moniteur, monitor, open, openr66, route, source, ssh, transfer, transfert, waarp" />
<meta http-equiv="imagetoolbar" content="no" />
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1" />
<link rel="stylesheet" href="Waarp.css" type="text/css" />
<style type="text/css">
a {
	color:#0000FF;
	text-decoration:none;
}
a:visited {
	text-decoration:none;
}
a:hover {
	text-decoration:underline;
}
a img {
	border:#000000 0px none;
}
</style>
<title>Waarp - Waarp R66-Options</title>
	<script type="text/javascript">
//<![CDATA[
	function MHGetRef(str)
	{
		if(document.all)
			return document.all[str];
		else
			return document.getElementById(str);
	}

	function MHSwitchImage(strID, strFileName)
	{
		var obj = MHGetRef(strID);
		if(obj == null || obj + "" == "undefined") return;
		obj.src = strFileName;
	}
//]]>
	</script>
<script type="text/javascript">
//<![CDATA[
	function mvgGetRef(str)						{ return (document.all) ? document.all[str] : document.getElementById(str); }
	function mvgSetClass(strId, strClass)		{ var obj = mvgGetRef(strId); if(obj != null && typeof(obj) != "undefined") obj.className = strClass; }
	function mvgSwitchImage(strId, strFileName)	{ var obj = mvgGetRef(strId); if(obj != null && typeof(obj) != "undefined") obj.src = strFileName; }
//]]>
</script>
</head>
<body class="normal" style="margin:0px;padding:0px;background-color:#FFFFFF;background-image:url(gre/gre7722.png);background-position:left top;background-repeat:repeat-y;">
<div style="text-align:left;">
<div style="background-color:#EF6D00;text-align:left;"><a href="index.html"><img title="GoldenGate" style="border:none;" height="49" alt="GoldenGate" src="res/openlsd/waarp.jpg" width="74" /></a><img title="Waarp" style="border-top-style:none; border-bottom:#000000 0px solid; border-right-style:none; border-left-style:none;" height="40" alt="Waarp" src="gre/gre7723.png" width="99" /></div>
<div style="border-right:none;border-left:none;border-bottom:2px solid #FFFFFF;border-top:1px solid #FFFFFF;background-color:#F9DEC7;text-align:left;"><table cellpadding="0" cellspacing="0" border="0" style="width:100%;margin:0;padding:0;border:0 solid none;"><tr><td style="vertical-align:top;"><div></div></td><td style="height:1px;width:1px;margin:0;padding:0;border:0 solid none;"><div style="height:1px;width:1px;margin:0;padding:0;border:0 solid none;"></div></td></tr></table></div>
<table style="border:none;" cellspacing="0" cellpadding="0" width="100%">
<tbody>
<tr>
<td style="vertical-align:top;width:100px;background-color:#FFFFFF;">&nbsp;</td>
<td style="padding-right:5px;padding-left:5px;padding-bottom:0px;vertical-align:top;width:100%;padding-top:0px;">
<div id="Comp4_MenuHorizontal">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
	<tr style="background-image:url(gre/gre7691.png);background-repeat:repeat-x;background-position:left top;">
		<td id="MH1_0"><a href="WaarpR66Presentation.html" onmouseover="MHSwitchImage('MH1_0_img', 'gre/gre7735.png');" onmouseout="MHSwitchImage('MH1_0_img', 'gre/gre7734.png');"><img id="MH1_0_img" src="gre/gre7734.png" width="179" height="26" alt="Waarp R66-Presentation" style="border:none;display:block;" /></a></td>
		<td></td><td><img src="gre/gre7690.png" height="18" width="1" style="border:none;display:block;" alt="" /></td><td></td>
		<td id="MH1_1"><a href="WaarpR66Technical.html" onmouseover="MHSwitchImage('MH1_1_img', 'gre/gre7737.png');" onmouseout="MHSwitchImage('MH1_1_img', 'gre/gre7736.png');"><img id="MH1_1_img" src="gre/gre7736.png" width="159" height="26" alt="Waarp R66-Technical" style="border:none;display:block;" /></a></td>
		<td></td><td><img src="gre/gre7690.png" height="18" width="1" style="border:none;display:block;" alt="" /></td><td></td>
		<td id="MH1_2"><a href="WaarpR66Installation.html" onmouseover="MHSwitchImage('MH1_2_img', 'gre/gre7739.png');" onmouseout="MHSwitchImage('MH1_2_img', 'gre/gre7739.png');"><img id="MH1_2_img" src="gre/gre7739.png" width="190" height="26" alt="Waarp R66-Installation" style="border:none;display:block;" /></a></td>
		<td></td><td><img src="gre/gre7690.png" height="18" width="1" style="border:none;display:block;" alt="" /></td><td></td>
		<td id="MH1_3"><a href="WaarpR66Production.html" onmouseover="MHSwitchImage('MH1_3_img', 'gre/gre7741.png');" onmouseout="MHSwitchImage('MH1_3_img', 'gre/gre7740.png');"><img id="MH1_3_img" src="gre/gre7740.png" width="167" height="26" alt="Waarp R66-Production" style="border:none;display:block;" /></a></td>
		<td style="width:100%;"><img src="img/space.gif" width="1" height="1" style="border:none;display:block;" alt="" /></td>
	<td><img src="gre/gre7691.png" height="26" width="1" style="border:none;display:block;" alt="" /></td>
	</tr>
</table>
</div></td></tr>
<tr>
<td style="vertical-align:top;width:100px;">
<div id="Comp6_MenuVertical" style="text-align:left;"><div id="mvg1"><a href="index.html" onmouseover="mvgSwitchImage('mvg1_0_img', 'gre/gre7694.png');" onmouseout="mvgSwitchImage('mvg1_0_img', 'gre/gre7692.png');"><img id="mvg1_0_img" src="gre/gre7692.png" width="150" height="31" alt="Home" style="display:block;border:none;" /></a>
<a href="WorldofWaarp.html" onmouseover="mvgSwitchImage('mvg1_1_img', 'gre/gre7697.png');" onmouseout="mvgSwitchImage('mvg1_1_img', 'gre/gre7695.png');"><img id="mvg1_1_img" src="gre/gre7695.png" width="150" height="31" alt="World of Waarp" style="display:block;border:none;" /></a>
<a href="WaarpR66.html" onmouseover="mvgSwitchImage('mvg1_2_img', 'gre/gre7700.png');" onmouseout="mvgSwitchImage('mvg1_2_img', 'gre/gre7699.png');"><img id="mvg1_2_img" src="gre/gre7699.png" width="150" height="31" alt="Waarp R66" style="display:block;border:none;" /></a>
<a href="WaarpFTP.html" onmouseover="mvgSwitchImage('mvg1_3_img', 'gre/gre7703.png');" onmouseout="mvgSwitchImage('mvg1_3_img', 'gre/gre7701.png');"><img id="mvg1_3_img" src="gre/gre7701.png" width="150" height="31" alt="Waarp FTP" style="display:block;border:none;" /></a>
<a href="WaarpGatewayFtp.html" onmouseover="mvgSwitchImage('mvg1_4_img', 'gre/gre7706.png');" onmouseout="mvgSwitchImage('mvg1_4_img', 'gre/gre7704.png');"><img id="mvg1_4_img" src="gre/gre7704.png" width="150" height="31" alt="WaarpGatewayFtp" style="display:block;border:none;" /></a>
<a href="WaarpGatewayHttp.html" onmouseover="mvgSwitchImage('mvg1_5_img', 'gre/gre7709.png');" onmouseout="mvgSwitchImage('mvg1_5_img', 'gre/gre7707.png');"><img id="mvg1_5_img" src="gre/gre7707.png" width="150" height="31" alt="WaarpGatewayHttp" style="display:block;border:none;" /></a>
<a href="WaarpCommons.html" onmouseover="mvgSwitchImage('mvg1_6_img', 'gre/gre7712.png');" onmouseout="mvgSwitchImage('mvg1_6_img', 'gre/gre7710.png');"><img id="mvg1_6_img" src="gre/gre7710.png" width="150" height="31" alt="Waarp Commons" style="display:block;border:none;" /></a>
<a href="APIReferences.html" onmouseover="mvgSwitchImage('mvg1_7_img', 'gre/gre7715.png');" onmouseout="mvgSwitchImage('mvg1_7_img', 'gre/gre7713.png');"><img id="mvg1_7_img" src="gre/gre7713.png" width="150" height="31" alt="API References" style="display:block;border:none;" /></a>
<a href="Downloads.html" onmouseover="mvgSwitchImage('mvg1_8_img', 'gre/gre7718.png');" onmouseout="mvgSwitchImage('mvg1_8_img', 'gre/gre7716.png');"><img id="mvg1_8_img" src="gre/gre7716.png" width="150" height="31" alt="Downloads" style="display:block;border:none;" /></a>
<a href="WaarpDependson.html" onmouseover="mvgSwitchImage('mvg1_9_img', 'gre/gre7721.png');" onmouseout="mvgSwitchImage('mvg1_9_img', 'gre/gre7719.png');"><img id="mvg1_9_img" src="gre/gre7719.png" width="150" height="31" alt="Waarp Depends on" style="display:block;border:none;" /></a>
</div></div></td>
<td style="padding-right:5px;padding-left:5px;padding-bottom:5px;vertical-align:top;width:100%;padding-top:5px;">
<h1 class="h1">Waarp R66-Options</h1>
<div id="Comp1_sys_doctext"><h1 class="h1">Limit CPU / Connexion</h1>
<p style="text-align:justify;"><span style="font-size:10pt;">With these options (<strong>usecpulimit</strong>), Waarp R66 Server can limit the new requests according to a threshold on CPU global usage and on a maximum number of concurrent requests. When one of these limits is exceeded, the request is refused and postponed for a random number proportional to <strong>30 </strong>seconds (option <strong>timeoutcon</strong>). After 3 retries, the request is cancelled.</span></p>
<p style="text-align:justify;"><span style="font-size:10pt;">These tests are done both on requester and requested side.</span></p>
<ul>
<li><div style="text-align:justify;"><span style="font-size:10pt;"><strong>cpulimit</strong>: Value for CPU is in float between 0 and 1 (% of CPU) where 0 or 1 means no limit. </span></div></li>

<li><div style="text-align:justify;"><span style="font-size:10pt;"><strong>usejdkcpulimit</strong>: CPU is computed either with native support from JRE (but not all JRE support this) or either from Java Sysmon library.</span></div></li>

<li>
<div style="text-align:justify;"><span style="font-size:10pt;"><strong>connlimit</strong>: Value for connexion is starting from 0 where 0 means no limit.</span></div></li></ul>
<h1 class="h1" style="text-align:justify;">&nbsp;</h1>
<h1 class="h1" style="text-align:justify;">Check of IP on servers and clients</h1>
<p style="text-align:justify;"><span style="font-size:10pt;">By default, real IP address used by the remote host is not compared against the IP (or the resolution given from DNS) stored with the remote HostId. If for security reasons this is required, you can enable this check to be done. When activated in <strong>checkaddress</strong>:</span></p>
<ul>
<li><div style="text-align:justify;"><span style="font-size:10pt;">For a server, the test will always be done.</span></div></li>

<li>
<div style="text-align:justify;"><span style="font-size:10pt;">For a client, it depends if you enable it through the specific option <strong>checkclientaddress</strong>, then 2 cases occur:</span></div>
<ul>
<li><div style="text-align:justify;"><span style="font-size:10pt;">If the client has an address of "0.0.0.0", then no test is done (this special address is to be used when a lot of remote clients are to be used without high security challenge).</span></div></li>

<li>
<div style="text-align:justify;"><span style="font-size:10pt;">If not, then the check is done as for&nbsp;a server.</span></div></li></ul></li></ul>
<h1 class="h1" style="text-align:justify;">&nbsp;</h1>
<h1 class="h1" style="text-align:justify;">Host as Client</h1>
<p style="text-align:justify;"><span style="font-size:10pt;">In version 2.0, a new property is attached to the Host definition: <strong>isclient</strong>. This property stands to recognize remote client to prevent a server to try to initiate a request to this client. Since this client is not a server, it is not listening to incoming requests and therefore cannot be the target of an incoming request.</span></p>
<p style="text-align:justify;"><span style="font-size:10pt;">The special address "0.0.0.0" can also be used to specify a client but it extends it to not try to check its IP address. It is useful in the situation where you have a lot of clients and you don't want to declare them all in the Host table. All those clients will have to share the ID and the password (and the SSL key in case of strong authentication).</span></p>
<h1 class="h1" style="text-align:justify;">&nbsp;</h1>
<h1 class="h1" style="text-align:justify;">Cryptographic support</h1>
<p style="text-align:justify;"><span style="font-size:10pt;">In version 2.0, many improvements were done on cryptographic side.</span></p>
<ol>
<li><div style="text-align:justify;"><span style="font-size:10pt;">SSL: You can now have simple SSL support or even using string authentication of clients using the <strong>trustuseclientauthenticate </strong>option.</span></div></li>

<li><div style="text-align:justify;"><span style="font-size:10pt;">Password: all passwords are crypted using a private DES Key (private to each server but can be the same if you want). The passwords are crypted both on files, database. This key is locally referenced by <strong>cryptokey </strong>option. You have to use the GoldengatePassword tool (see <a href="WaarpCommons.html">GoldenGate Commons</a>) to crypt your passwords (at least for the administrator password) or to use the administration web interface.</span></div></li>

<li>
<div style="text-align:justify;"><span style="font-size:10pt;">On the network, a single way crypto key is used, common to all OpenR66 hosts when they need to exchange passwords.</span></div></li></ol>
<h1 class="h1" style="text-align:justify;">&nbsp;</h1>
<h1 class="h1" style="text-align:justify;">Store Task saving on XML file for Thin Client</h1>
<p style="text-align:justify;"><span style="font-size:10pt;">The special option <strong>taskrunnernodb </strong>allows you to have a persistent view of the transfer (the task) for Thin Client without database by using a XML file. It allows to restart a stopped or canceled transfer smoothly without starting a new transfer from the beginning.</span></p>
<h1 class="h1" style="text-align:justify;">&nbsp;</h1>
<h1 class="h1" style="text-align:justify;">Control on restart transfer</h1>
<p style="text-align:justify;"><span style="font-size:10pt;">Although an interrupted request restarts and each received packet should have been previously validated, the protocol include a backward move on the packet&nbsp;rank in order to ensure the quality of the transfer without doubt. When a transfer is restarted, OpenR66 first checks the receiver rank and takes it as the reference minus&nbsp;a gap. Then it checks the existing file (reception side) and check again against this rank minus a gap.&nbsp;You can control this feature by specifying the block size (<strong>blocksize</strong>) and the gap of rank (<strong>gaprestart</strong>), where the retransmitted byte size will be: block size x rank.</span></p>
<p style="text-align:justify;">&nbsp;</p>
<p style="text-align:justify;">&nbsp;</p>
<h1 class="h1" style="text-align:justify;">Usage GoldenGate LocalExec Daemon</h1>
<p style="text-align:justify;"><span style="font-size:10pt;">In order to improve the efficiency of external commands execution by preventing the fork of the Waarp R66 JVM process (costly regarding its memory), there is an optional support to execute those commands through a GoldenGate LocalExec Daemon (see in </span><a href="WaarpCommons.html"><span style="font-size:10pt;">GoldenGate Commons</span></a><span style="font-size:10pt;">). To use this support, you have to define the following:</span></p>
<ul>
<li><div style="text-align:justify;"></div></li>

<li><span style="font-size:10pt;"><strong>uselocalexec</strong> (default="False") to enable the use of LocalExec support</span> 
</li><li><span style="font-size:10pt;"><strong>lexecaddr</strong> (optional) which could contains the address (default="127.0.0.1")</span> 
</li><li><span style="font-size:10pt;"><strong>lexecport</strong> (optional) which could contains the port to be used (default="9999")</span> 
<div></div></li></ul>
<p>&nbsp;</p>
<h1 class="h1">Usage of FastMD5 support</h1>
<p><span style="font-size:10pt;">In order to improve the efficiency of the computation of MD5 on blocks during file transfer, 3 methods are provided.</span></p>
<ol>
<li><span style="font-size:10pt;"><strong>usefastmd5</strong>=False =&gt; Will use internal JDK support of MD5 computation </span></li>
<li><span style="font-size:10pt;"><strong>usefastmd5</strong>=True but <strong>fastmd5</strong> not declared or empty =&gt; Will use Java MD5 implementation more efficient than JDK version </span></li>
<li>
<div style="text-align:justify;"><span style="font-size:10pt;"><strong>usefastmd5</strong>=True and <strong>fastmd5</strong>=path to SO file or DLL (according to the systems) =&gt; Will use JNI C MD5 implementation suppose to be more efficient than version 2.</span></div></li></ol>
<p style="text-align:justify;"><span style="font-size:10pt;">However note that the results could depends according to the systems and the JDK. Most of the time, Version 3 is the fastest, but sometime Version 2 is better than Version 3, and always better than Version 1. The efficiency of Version 3 greatly depends on the compilation of the C module. See <a href="WaarpCommons.html">GoldenGate Digest in GoldenGate Commons</a></span></p>
<p style="text-align:justify;">&nbsp;</p>
<p style="text-align:justify;"><span style="color:#FF0000;font-size:11pt;">It appears with recent versions of JVM that JDK in server mode is really efficient, almost equivalent to C JNI version. So one might use by default <strong>usefastmd5=False</strong>.</span></p>
<p style="text-align:justify;">&nbsp;</p>
<p style="text-align:justify;"><span style="font-size:10pt;">Note also that a new option can specify which kind of digest you want to use (it is for now a global option, not a local option): <strong><span style="color:#FF0000;">digest </span></strong>where values mean: MD5=0, MD2=1, SHA1=2, SHA256=3, SHA384=4, SHA512=5, CRC32=6, ADLER32=7.</span></p>
<h1 class="h1">&nbsp;</h1>
<h1 class="h1">Usage of&nbsp;Multiple Monitors&nbsp;support</h1>
<p style="text-align:justify;"><span style="font-size:10pt;">In order to improve reliability of the OpenR66 File Transfer Monitors and the scalability, we propose a new option that allows to spread the load behind a Load Balancer in TCP mode (as HA-Proxy) and a shared storage (as a simple NAS).</span></p>
<ol>
<li><span style="font-size:10pt;"><strong>multiplemonitors</strong>=1 =&gt;&nbsp;No multiple monitors will be supported (single instance)&nbsp;</span> 
</li><li><span style="font-size:10pt;"><strong>multiplemonitors</strong>=<strong><em>n</em></strong> =&gt;&nbsp;n servers will be used as a single instance to spread the load and increase the high availability&nbsp;</span></li></ol>
<p style="text-align:justify;"><span style="font-size:10pt;">Note that some specific attentions are needed such as to share the IN, OUT and WORK&nbsp;storages such that any servers can act on <span style="font-size:10pt;">those files </span>and any other storages that must be shared from the beginning of the transfer (pre-task) to the end of the transfer (post-task),&nbsp;and as to configure correctly the Load Balancer in TCP mode such as to spread the load and keep the connection once opened between 2 partners.</span></p><span>
<h1 class="h1">&nbsp;</h1>
<h1 class="h1">Usage of&nbsp;No Database for Server</h1>
<p style="text-align:justify;"><span style="font-size:10pt;">For special project where no database is needed, but then loosing the ability to store all transfer status and associated capacity (such as automatic retry if not specified in the rules), the server code now supports to not have any database connections. However it is still possible to store the trace of the transfers within XML files, such that one can automatize some actions in regard to the status of each transfer through file analysis. Note however that some functionality like the monitoring will be limited. The option taskrunnernodb will allow to use XML files support if set to true. If set to false, no information will be retained out of memory of the process.&nbsp;</span></p>
<h1 class="h1">&nbsp;</h1>
<h1 class="h1">Usage of&nbsp;ExecJava class</h1>
<p style="text-align:justify;"><span style="font-size:10pt;">In order to facilitate the integration in application modules, OpenR66 now supports the ability to run specific Java Class through 3 ways. Note that this functionality is only valid starting <strong>in version 2.3</strong>.</span></p>
<ul>
<li><p style="text-align:justify;"><span style="font-size:10pt;">One is through pre or post or error tasks using the EXECJAVA keyword, following by the full class name which must implement the R66Runnable interface.</span></p></li>

<li><p style="text-align:justify;"><span style="font-size:10pt;">Another one is through specific R66Business command, which will also execute an R66Runnable implementation, through for instance the AbstractExecJavaTask abstract class that could be extended.</span></p></li>

<li><p style="text-align:justify;"><span style="font-size:10pt;">Finally, there is the possibility to associate a Business Class (see R66BusinessInterface) through a Business Factory (see R66BusinessFactoryInterface) to each transfer that will run several methods in the various steps that could occur:</span></p><ul>
<li><p style="text-align:justify;"><span style="font-family:microsoft sans serif, sans-serif;"><span style="font-size:10pt;"><em>void checkAtStartup(R66Session session)</em></span></span><span style="font-size:10pt;">: launched at the very startup of the transfer and before the pre commands</span></p></li>

<li><p style="text-align:justify;"><span style="font-family:microsoft sans serif, sans-serif;"><span style="font-size:10pt;"><em>void checkAfterPreCommand(R66Session session)</em></span></span><span style="font-size:10pt;">: launched after the pre commands and before the transfer starts</span></p></li>

<li><p style="text-align:justify;"><span style="font-family:microsoft sans serif, sans-serif;"><em><span style="font-size:10pt;">void checkAfterTransfer(R66Session session)</span></em></span><span style="font-size:10pt;">: launched after the transfer is finished and before the post commands</span></p></li>

<li><p style="text-align:justify;"><span style="font-size:10pt;"><span style="font-family:microsoft sans serif, sans-serif;"><em>void checkAfterPost(R66Session session)</em></span></span><span style="font-size:10pt;">: launched after the post commands and before the end of the request</span></p></li>

<li><p style="text-align:justify;"><span style="font-size:10pt;"><span style="font-family:microsoft sans serif, sans-serif;"><em>void checkAtError(R66Session session)</em></span></span><span style="font-size:10pt;">: launched once an error occurs</span></p></li>

<li><p style="text-align:justify;"><span style="font-family:microsoft sans serif, sans-serif;"><span style="font-size:10pt;"><em>void checkAtChangeFilename(R66Session session)</em></span></span><span style="font-size:10pt;">: launched if the filename is changed during the commands (pre or post)</span></p></li>

<li><p style="text-align:justify;"><span style="font-family:microsoft sans serif, sans-serif;"><span style="font-size:10pt;"><em>void releaseResources()</em></span></span><span style="font-size:10pt;">: launched at the very end, to release any internal resources that should be released</span></p></li>

<li>
<p style="text-align:justify;"><span style="font-family:microsoft sans serif, sans-serif;"><span style="font-size:10pt;"><em>String getInfo()</em></span></span><span style="font-size:10pt;"> and </span><span style="font-family:microsoft sans serif, sans-serif;"><span style="font-size:10pt;"><em>void setInfo(String info)</em></span></span><span style="font-family:verdana, sans-serif;"><span style="font-size:10pt;">: launched by programmatic (business code) to enable to set a special info (as String) and to retrieve it at any time.</span></span></p></li></ul></li>


<li>
<p style="text-align:justify;"><span size="+0"><span style="font-size:10pt;">Note that to allow a host to call a Business Request, it has to be added in the configuration file as</span> <span style="font-size:8pt;">&lt;business&gt;&lt;businessid&gt;hostname&lt;/businessid&gt;...&lt;/business&gt;</span>. <span style="font-size:10pt;">If not set, the host will not be allow. On EXECJAVA, the security is first that the rule is only local to the host, and second the rule has the possibility to limit the allowed hosts to be partner of it.</span></span></p></li></ul></span></div></td></tr></tbody></table>
<div id="Comp7_CodeRelayer"><script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-1693657-4";
urchinTracker();
</script>
</div></div>
</body>
</html>
