<!DOCTYPE html><!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang=""> <![endif]--><!--[if IE 7]> <html class="no-js lt-ie9 lt-ie8" lang=""> <![endif]--><!--[if IE 8]> <html class="no-js lt-ie9" lang=""> <![endif]--><!--[if gt IE 8]><!--> <html class="no-js" lang=""> <!--<![endif]-->
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="generator" content="Site Studio 6 (www.effectivestudios.com)" />
<meta name="keywords" content="bregier, fichier, file, frederic, gateway, goldengate, http, java, libre, moniteur, monitor, open, openr66, route, source, ssh, transfer, transfert, waarp" />
<meta name="robots" content="index,follow" />
<meta name="description" content="Waarp project" />
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1" />
<link rel="stylesheet" href="Waarp.css" type="text/css" />
<style type="text/css">
a {
	color:#0000FF;
	text-decoration:underline;
}
a:visited {
	text-decoration:underline;
}
a:hover {
	text-decoration:underline;
}
a img {
	border:#000000 0px none;
}
</style>
<title>Waarp - Waarp-FTP-Configuration</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- Bootstrap CSS -->
<link rel="stylesheet" href="css/magic-bootstrap-min.css">
<!-- special CSS -->
<style type="text/css">
@-moz-document url-prefix() { fieldset { display: table-cell; } }
</style>
<!-- JQuery -->
<script type="text/javascript" src="js/jquery-1.11.2.min.js"></script>
<script src="js/modernizr-2.8.3-respond-1.4.2.min.js"></script>
<!-- Bootstrap -->
<script type="text/javascript" src="js/bootstrap.min.js"></script>
<link rel="stylesheet" href="Waarp.css" type="text/css" />
<script>
$( document ).ready(function(){
 $.get( "res/waarpmenu.html", function(data) {
 $( "#waarpmenu" ).html(data);
 $("body").removeAttr("class").removeAttr( "style" );
 $("#Comp2_sys_doctext").addClass("panel-body container-fluid");
 var curpage= "ftp0/ftpconfig";
 var splitPages = curpage.split("/");
 $.each( splitPages, function( index, value ){ $("#"+value).addClass("active"); });
  $('ul.dropdown-menu [data-toggle=dropdown]').on('click', function(event) {
   event.preventDefault(); 
   event.stopPropagation(); 
   $(this).parent().siblings().removeClass('open');
   $(this).parent().toggleClass('open');
  });
 });
});
</script>
<style type="text/css">
.dropdown-submenu{position:relative;}
.dropdown-submenu>.dropdown-menu{top:0;left:100%;margin-top:-6px;margin-left:-1px;-webkit-border-radius:0 6px 6px 6px;-moz-border-radius:0 6px 6px 6px;border-radius:0 6px 6px 6px;}
.dropdown-submenu>a:after{display:block;content:" ";float:right;width:0;height:0;border-color:transparent;border-style:solid;border-width:5px 0 5px 5px;border-left-color:#cccccc;margin-top:5px;margin-right:-10px;}
.dropdown-submenu:hover>a:after{border-left-color:#555;}
.dropdown-submenu.pull-left{float:none;}.dropdown-submenu.pull-left>.dropdown-menu{left:-100%;margin-left:10px;-webkit-border-radius:6px 0 6px 6px;-moz-border-radius:6px 0 6px 6px;border-radius:6px 0 6px 6px;}
.h1 { font-size:14px; color:#333333; font-weight:bold;}
.h2, .h3 { font-size:12pt; color:#333333; font-weight:bold; }
.h4, .h5, .h6 { font-size:13px; color:#333333; font-weight:bold; }
</style>
</head>
<body class="normal" style="font-family:Verdana,sans-serif;font-size:8pt;color:#000000;margin:0px;padding:0px;background-color:#FFFFFF;">
<div id="Comp1_CodeRelayer"><!--[if lt IE 8]>
<p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
<![endif]-->
<div class="cover" id="waarpmenu" />
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-1693657-4', 'auto');
  ga('send', 'pageview');

</script>
</div>
<div style="text-align:left;margin:0px 4px;">
<h1 class="h1">Waarp-FTP-Configuration</h1>
<div id="Comp2_sys_doctext"><p style="text-align:justify;"><span style="font-size:11pt;"><strong>How to configure Waarp Ftp using default implementation</strong></span></p>
<p style="text-align:justify;">&nbsp;</p>
<p style="text-align:justify;"><span style="font-size:11pt;">In the zip distribution WaarpFtp-X.Y.Z-dist.zip, you will find an extra directory named: src/main/config where two examples files are: config.xml and authent.xml.<br />Those two files are related to the simple implementation of the Ftp Server.<br /><br />The first one (config.xml) specifies the general behavior:</span></p>
<ul>
<li><div style="text-align:justify;"><span style="font-size:11pt;">server password (for admin functions)</span></div></li>

<li><div style="text-align:justify;"><span style="font-size:11pt;">server port, home directory, bandwidth limitation, optional server address (in case of NAT for instance)</span></div></li>

<li>
<div style="text-align:justify;"><span style="font-size:11pt;">server special configuration like threads number, timeout of connection, deleteOnAbort, usenio, fastmd5, blocksize, rangeport and the localization of the authentfile (second file)</span></div></li></ul>
<p style="text-align:justify;"><span style="font-size:11pt;">The second one is a simple authentication file containing user definition (user name, password, account, admin status).<br /><br />These two files are for the simple implementation (which is a simple FtpServer without any special actions), and using a simple authentication mechanism (from authent.xml). The simple Ftp Server is included in the WaarpGatewayFtp-Simpleimpl-X.Y.Z.jar .<br />It can be started like:</span></p>
<blockquote style="margin-right:0px;" dir="ltr">
<p style="text-align:justify;"><span style="font-size:11pt;">java ... classpath and jvm settings ... org.waarp.ftp.simpleimpl.SimpleGatewayFtpServer src/main/config/config.xml</span></p></blockquote>
<p style="text-align:justify;"><span style="font-size:11pt;">Note that in the classpath you need :</span></p>
<ul>
<li><div style="text-align:justify;"><span style="font-size:11pt;">External jars: </span></div><ul>
<li><div style="text-align:justify;"><a href="http://netty.io/"><span style="font-size:11pt;">Netty</span></a><span style="font-size:11pt;">, </span></div></li>

<li><div style="text-align:justify;"><span style="font-size:11pt;"><a href="http://commons.apache.org/io/">Apache Common IO</a>, </span></div></li>

<li><div style="text-align:justify;"><span style="font-size:11pt;"><a href="http://dom4j.sourceforge.net/">DOM4J</a>, </span></div></li>

<li><div style="text-align:justify;"><span style="font-size:11pt;"><a href="http://jaxen.codehaus.org/">Jaxen</a>, </span></div></li>

<li>
<div style="text-align:justify;"><span style="font-size:11pt;"><a href="http://logback.qos.ch/">Logback</a></span></div></li></ul></li>


<li>
<div style="text-align:justify;"><span style="font-size:11pt;">Goldengate jars: </span></div>
<ul>
<li><div style="text-align:justify;"><span style="font-size:11pt;"><a href="Digest.html">WaarpDigest</a>, </span></div></li>

<li><div style="text-align:justify;"><span style="font-size:11pt;"><a href="Common.html">WaarpCommon</a></span></div></li>

<li><div style="text-align:justify;"><span style="font-size:11pt;">and of course the WaarpGatewayFtp-Core</span></div></li>

<li><div style="text-align:justify;"><span style="font-size:11pt;">probably the&nbsp;&nbsp;WaarpGatewayFtp-Filesystem (except if you want to implement virtual Directory and File in something different than true directories and files)</span></div></li>

<li>
<div style="text-align:justify;"><span style="font-size:11pt;">(and if you are ok with the default implementation) the WaarpGatewayFtp-Simpleimpl jars.</span></div></li></ul></li></ul>
<p style="text-align:justify;"><span style="font-size:11pt;">Some of them can be replaced if you change the implementation (Common IO is optional, Dom4J and Jaxen are only used if XML configuration file is used, Logback could be replaced with other logger framework, see the org.waarp.common.logging from WaarpCommon where JDK is also supported, others can easily be supported).<br /><br />If you want to implement something different, here are the files you may want to re write. They can all be found in the simpleimpl sub package at goldengate.ftp.simpleimpl package. <a href="WaarpGatewayFtp.html">A perfect example is the WaarpGatewayFtp sub project</a>.</span></p>
<ul>
<li><div style="text-align:justify;"><span style="font-size:11pt;">the server startup itself : SimpleGatewayFtpServer</span></div></li>

<li>
<div style="text-align:justify;"><span style="font-size:11pt;">the Configuration file : config.FileBasedConfiguration</span></div></li></ul>
<blockquote style="margin-right:0px;" dir="ltr">
<p style="text-align:justify;"><span style="font-size:11pt;">By default an XML file is used. If you want to use other ways to implement the load of the configuration, you can change this implementation by the one you want (for instance from a database).</span></p>
<p style="text-align:justify;"><span style="font-size:11pt;">If you want to include some others configurations properties and XML is ok for you, you can extend it to fit your needs. </span></p></blockquote>
<ul>
<li>
<div style="text-align:justify;"><span style="font-size:11pt;">the virtual Directory, File implementation : file.FileBasedDir, file.FileBasedFile</span></div></li></ul>
<blockquote style="margin-right:0px;" dir="ltr">
<p style="text-align:justify;"><span style="font-size:11pt;">For instance, if you want to implement File and Directory as content in a database, you will have to not use the GoldenGateFtp-Filesystem-X.Y.Z.jar package an to implement your own File and Directory representation.</span></p>
<p style="text-align:justify;"><span style="font-size:11pt;">If you are OK with real file and directory, then nothing has to be done.</span></p></blockquote>
<ul>
<li>
<div style="text-align:justify;"><span style="font-size:11pt;">the authentication system : file.FileBasedAuth and its associated file.SimpleAuth </span></div></li></ul>
<blockquote style="margin-right:0px;" dir="ltr">
<p style="text-align:justify;"><span style="font-size:11pt;">For instance, if you want to inherit authentication from a LDAP, you will have to implement your own extension of org.waarp.ftp.filesystembased.FilesystemBasedFtpAuth instead of this simple one.</span></p></blockquote>
<ul>
<li>
<div style="text-align:justify;"><span style="font-size:11pt;">then you have two classes that implements business actions on pre and post actions on transfer:</span></div>
<ul>
<li><div style="text-align:justify;"><span style="font-size:11pt;">control.SimpleBusinessHandler : for the control connection of FTP service</span></div></li>

<li>
<div style="text-align:justify;"><span style="font-size:11pt;">data.FileSystemBasedDataBusinessHandler : for the data connection of FTP service</span></div></li></ul></li></ul>
<blockquote style="margin-right:0px;" dir="ltr">
<p style="text-align:justify;margin-right:0px;" dir="ltr"><span style="font-size:11pt;">By default, this classes does nothing except logging.</span></p></blockquote>
<p style="text-align:justify;margin-right:0px;" dir="ltr"><span style="font-size:11pt;">To shutdown the service, either you do a CTRL-C (or better if Unix but not IBM JDK kill -SIGUSR1 &lt;processID&gt;), or better you connect as an admin user and execute the special command:</span></p>
<blockquote style="margin-right:0px;" dir="ltr">
<p style="text-align:justify;margin-right:0px;" dir="ltr"><span style="font-size:11pt;">internalshutdown &lt;password&gt;</span></p>
<p style="text-align:justify;margin-right:0px;" dir="ltr"><br /><span style="font-size:11pt;">where the password is the one in the config.xml for admin actions.</span></p></blockquote>
<p style="text-align:justify;margin-right:0px;" dir="ltr"><span style="font-size:11pt;">For instance, using FTP from windows you have to type<br />&gt;quote internalshutdown password<br /><br />Note that this FTP Server can be used as a simple one, but also for more complicated cases. It is in the middle of a self FTP server (simpleimpl package) and a framework to implement its own FTP service, which is the main reason of this project since I've not found any other open source&nbsp; implementations allowing to have pre or post actions on transfers or commands.<br /></span></p></div>
<p>&nbsp;</p></div>
</body>
</html>
