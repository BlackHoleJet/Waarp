<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="keywords" content="bregier, fichier, file, frederic, gateway, goldengate, http, java, libre, moniteur, monitor, open, openr66, route, source, ssh, transfer, transfert, waarp" />
<meta name="generator" content="Site Studio 6 (www.effectivestudios.com)" />
<meta name="description" content="Waarp project" />
<meta http-equiv="imagetoolbar" content="no" />
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1" />
<meta name="robots" content="index,follow" />
<link rel="stylesheet" href="Waarp.css" type="text/css" />
<style type="text/css">
a {
	color:#0000FF;
	text-decoration:none;
}
a:visited {
	text-decoration:none;
}
a:hover {
	text-decoration:underline;
}
a img {
	border:#000000 0px none;
}
</style>
<title>Waarp - R66Reschedule</title>
	<script type="text/javascript">
//<![CDATA[
	function MHGetRef(str)
	{
		if(document.all)
			return document.all[str];
		else
			return document.getElementById(str);
	}

	function MHSwitchImage(strID, strFileName)
	{
		var obj = MHGetRef(strID);
		if(obj == null || obj + "" == "undefined") return;
		obj.src = strFileName;
	}
//]]>
	</script>
<script type="text/javascript">
//<![CDATA[
	function mvgGetRef(str)						{ return (document.all) ? document.all[str] : document.getElementById(str); }
	function mvgSetClass(strId, strClass)		{ var obj = mvgGetRef(strId); if(obj != null && typeof(obj) != "undefined") obj.className = strClass; }
	function mvgSwitchImage(strId, strFileName)	{ var obj = mvgGetRef(strId); if(obj != null && typeof(obj) != "undefined") obj.src = strFileName; }
//]]>
</script>
</head>
<body class="normal" style="margin:0px;padding:0px;background-color:#FFFFFF;background-image:url(gre/gre11704.png);background-position:left top;background-repeat:repeat-y;">
<div style="text-align:left;">
<div style="background-color:#EF6D00;text-align:left;"><a href="index.html"><img title="GoldenGate" style="border:none;" height="49" alt="GoldenGate" src="res/openlsd/waarp.jpg" width="74" /></a><img title="Waarp" style="border-top-style:none; border-bottom:#000000 0px solid; border-right-style:none; border-left-style:none;" height="40" alt="Waarp" src="gre/gre11705.png" width="99" /></div>
<div style="border-right:none;border-left:none;border-bottom:2px solid #FFFFFF;border-top:1px solid #FFFFFF;background-color:#F9DEC7;text-align:left;"><table cellpadding="0" cellspacing="0" border="0" style="width:100%;margin:0;padding:0;border:0 solid none;"><tr><td style="vertical-align:top;"><div></div></td><td style="height:1px;width:1px;margin:0;padding:0;border:0 solid none;"><div style="height:1px;width:1px;margin:0;padding:0;border:0 solid none;"></div></td></tr></table></div>
<table style="border:none;" cellspacing="0" cellpadding="0" width="100%">
<tbody>
<tr>
<td style="vertical-align:top;width:100px;background-color:#FFFFFF;">&nbsp;</td>
<td style="padding-right:5px;padding-left:5px;padding-bottom:0px;vertical-align:top;width:100%;padding-top:0px;">
<div id="Comp4_MenuHorizontal">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
	<tr style="background-image:url(gre/gre11673.png);background-repeat:repeat-x;background-position:left top;">
		<td id="MH1_0"><a href="WaarpR66Presentation.html" onmouseover="MHSwitchImage('MH1_0_img', 'gre/gre11719.png');" onmouseout="MHSwitchImage('MH1_0_img', 'gre/gre11718.png');"><img id="MH1_0_img" src="gre/gre11718.png" width="179" height="26" alt="Waarp R66-Presentation" style="border:none;display:block;" /></a></td>
		<td></td><td><img src="gre/gre11672.png" height="18" width="1" style="border:none;display:block;" alt="" /></td><td></td>
		<td id="MH1_1"><a href="WaarpR66Installation.html" onmouseover="MHSwitchImage('MH1_1_img', 'gre/gre11721.png');" onmouseout="MHSwitchImage('MH1_1_img', 'gre/gre11720.png');"><img id="MH1_1_img" src="gre/gre11720.png" width="171" height="26" alt="Waarp R66-Installation" style="border:none;display:block;" /></a></td>
		<td></td><td><img src="gre/gre11672.png" height="18" width="1" style="border:none;display:block;" alt="" /></td><td></td>
		<td id="MH1_2"><a href="WaarpR66Technical.html" onmouseover="MHSwitchImage('MH1_2_img', 'gre/gre11723.png');" onmouseout="MHSwitchImage('MH1_2_img', 'gre/gre11723.png');"><img id="MH1_2_img" src="gre/gre11723.png" width="175" height="26" alt="Waarp R66-Technical" style="border:none;display:block;" /></a></td>
		<td></td><td><img src="gre/gre11672.png" height="18" width="1" style="border:none;display:block;" alt="" /></td><td></td>
		<td id="MH1_3"><a href="WaarpR66Production.html" onmouseover="MHSwitchImage('MH1_3_img', 'gre/gre11725.png');" onmouseout="MHSwitchImage('MH1_3_img', 'gre/gre11724.png');"><img id="MH1_3_img" src="gre/gre11724.png" width="167" height="26" alt="Waarp R66-Production" style="border:none;display:block;" /></a></td>
		<td></td><td><img src="gre/gre11672.png" height="18" width="1" style="border:none;display:block;" alt="" /></td><td></td>
		<td id="MH1_4"><a href="WaarpAdministrator.html" onmouseover="MHSwitchImage('MH1_4_img', 'gre/gre11727.png');" onmouseout="MHSwitchImage('MH1_4_img', 'gre/gre11726.png');"><img id="MH1_4_img" src="gre/gre11726.png" width="156" height="26" alt="Waarp Administrator" style="border:none;display:block;" /></a></td>
		<td style="width:100%;"><img src="img/space.gif" width="1" height="1" style="border:none;display:block;" alt="" /></td>
	<td><img src="gre/gre11673.png" height="26" width="1" style="border:none;display:block;" alt="" /></td>
	</tr>
</table>
</div></td></tr>
<tr>
<td style="vertical-align:top;width:100px;">
<div id="Comp6_MenuVertical" style="text-align:left;"><div id="mvg1"><a href="index.html" onmouseover="mvgSwitchImage('mvg1_0_img', 'gre/gre11676.png');" onmouseout="mvgSwitchImage('mvg1_0_img', 'gre/gre11674.png');"><img id="mvg1_0_img" src="gre/gre11674.png" width="150" height="31" alt="Home" style="display:block;border:none;" /></a>
<a href="WorldofWaarp.html" onmouseover="mvgSwitchImage('mvg1_1_img', 'gre/gre11679.png');" onmouseout="mvgSwitchImage('mvg1_1_img', 'gre/gre11677.png');"><img id="mvg1_1_img" src="gre/gre11677.png" width="150" height="31" alt="World of Waarp" style="display:block;border:none;" /></a>
<a href="WaarpR66.html" onmouseover="mvgSwitchImage('mvg1_2_img', 'gre/gre11682.png');" onmouseout="mvgSwitchImage('mvg1_2_img', 'gre/gre11681.png');"><img id="mvg1_2_img" src="gre/gre11681.png" width="150" height="31" alt="Waarp R66" style="display:block;border:none;" /></a>
<a href="WaarpFTP.html" onmouseover="mvgSwitchImage('mvg1_3_img', 'gre/gre11685.png');" onmouseout="mvgSwitchImage('mvg1_3_img', 'gre/gre11683.png');"><img id="mvg1_3_img" src="gre/gre11683.png" width="150" height="31" alt="Waarp FTP" style="display:block;border:none;" /></a>
<a href="WaarpGatewayFtp.html" onmouseover="mvgSwitchImage('mvg1_4_img', 'gre/gre11688.png');" onmouseout="mvgSwitchImage('mvg1_4_img', 'gre/gre11686.png');"><img id="mvg1_4_img" src="gre/gre11686.png" width="150" height="31" alt="WaarpGatewayFtp" style="display:block;border:none;" /></a>
<a href="WaarpGatewayHttp.html" onmouseover="mvgSwitchImage('mvg1_5_img', 'gre/gre11691.png');" onmouseout="mvgSwitchImage('mvg1_5_img', 'gre/gre11689.png');"><img id="mvg1_5_img" src="gre/gre11689.png" width="150" height="31" alt="WaarpGatewayHttp" style="display:block;border:none;" /></a>
<a href="WaarpCommons.html" onmouseover="mvgSwitchImage('mvg1_6_img', 'gre/gre11694.png');" onmouseout="mvgSwitchImage('mvg1_6_img', 'gre/gre11692.png');"><img id="mvg1_6_img" src="gre/gre11692.png" width="150" height="31" alt="Waarp Commons" style="display:block;border:none;" /></a>
<a href="APIReferences.html" onmouseover="mvgSwitchImage('mvg1_7_img', 'gre/gre11697.png');" onmouseout="mvgSwitchImage('mvg1_7_img', 'gre/gre11695.png');"><img id="mvg1_7_img" src="gre/gre11695.png" width="150" height="31" alt="API References" style="display:block;border:none;" /></a>
<a href="Downloads.html" onmouseover="mvgSwitchImage('mvg1_8_img', 'gre/gre11700.png');" onmouseout="mvgSwitchImage('mvg1_8_img', 'gre/gre11698.png');"><img id="mvg1_8_img" src="gre/gre11698.png" width="150" height="31" alt="Downloads" style="display:block;border:none;" /></a>
<a href="WaarpDependson.html" onmouseover="mvgSwitchImage('mvg1_9_img', 'gre/gre11703.png');" onmouseout="mvgSwitchImage('mvg1_9_img', 'gre/gre11701.png');"><img id="mvg1_9_img" src="gre/gre11701.png" width="150" height="31" alt="Waarp Depends on" style="display:block;border:none;" /></a>
</div></div></td>
<td style="padding-right:5px;padding-left:5px;padding-bottom:5px;vertical-align:top;width:100%;padding-top:5px;">
<h1 class="h1">R66Reschedule</h1>
<div id="Comp1_sys_doctext">
<p style="text-align:justify;"><span style="font-size:11pt;">Once an error occurs, the transfer is interrupted. On certain conditions, it can be automatically rescheduled.</span></p>
<ul>
<li>
<div style="text-align:justify;"><span style="font-size:11pt;">If the error occurs at the connection step, Waarp will try 3 times before setting the transfer in error.</span></div></li>
<li>
<div style="text-align:justify;"><span style="font-size:11pt;">On shutdown of a Waarp server, all current transfers are stopped and will be reschedule automatically at startup.</span></div></li>
<li>
<div style="text-align:justify;"><span style="font-size:11pt;">On an error during a transfer, Waarp will execute the corresponding error tasks (send or recv). If one of them is a RESCHEDULE task with a validated filter, the transfer will be rescheduled. A validated filter depends on the root cause (-case), the time to reschedule the transfer (-delay, -between, -notbetween), the number of temptative (-count and CPTLIMIT).</span></div></li>
<li>
<div style="text-align:justify;"><span style="font-size:11pt;">If none of the above conditions is met, the transfer is in error and stopped. It can be manually restarted (or programatically restarted) through the administrator web interface, through the RequestTransfert -restart command, or its equivalent through the Thrift interface.</span></div></li></ul>
<p style="text-align:justify;"><span style="font-size:11pt;">Indeed, not all transfers should be restarted automatically, not for unlimited tries, not for specific error cases, and not due to business reasons. So the standard behavior of Waarp is to try the restart automatically only on network aspects, and then let the rule extending the behavior through the RESCHEDULE task.</span></p>
<p style="text-align:justify;">&nbsp;</p>
<p style="text-align:justify;"><span style="font-size:11pt;">The RESCHEDULE task has the following capabilities:</span></p>
<ul>
<li><p style="text-align:justify;"><span style="font-size:11pt;">If one RESCHEDULE task is executed (wherever it is) and validated (the transfer is really rescheduled), all following tasks are ignored and the execution flow stops</span></p></li>

<li>
<p style="text-align:justify;"><span style="font-size:11pt;">The task will rely on 2 informations: the rule default information (specifically for the maximum restart available) and the transfer information which will include the current retry counter.</span></p></li></ul>
<p style="text-align:justify;"><span style="font-size:11pt;">The options are:</span></p>
<ul>
<li><div style="text-align:justify;"><span style="font-size:11pt;">"-delay ms" where ms is the added number of ms on current time before retry on schedule</span> </div></li>

<li><div style="text-align:justify;"><span style="font-size:11pt;">"-case errorCode,errorCode,..." where errorCode is one of the following error of the current transfer (either literal or code in 1 character): </span></div><ul>
<li>
<div style="text-align:justify;"><span style="font-size:11pt;">ConnectionImpossible(C), ServerOverloaded(l), BadAuthent(A), ExternalOp(E), TransferError(T), MD5Error(M), Disconnection(D), RemoteShutdown(r), FinalOp(F), Unimplemented(U), Shutdown(S), RemoteError(R), Internal(I), StoppedTransfer(H), CanceledTransfer(K), Warning(W), Unknown(-), QueryAlreadyFinished(Q), QueryStillRunning(s), NotKnownHost(N), QueryRemotelyUnknown(u), FileNotFound(f), CommandNotFound(c), PassThroughMode(p)</span></div></li></ul></li>


<li><div style="text-align:justify;"><span style="font-size:11pt;">"-between start;end" and/or "-notbetween start;end" (multiple times are allowed, start or end can be not set) and where start and stop are in the following format: </span></div><ul>
<li><div style="text-align:justify;"><span style="font-size:11pt;">Yn:Mn:Dn:Hn:mn:Sn where n is a number for each time specification, each specification is optional, as Y=Year, M=Month, D=Day, H=Hour, m=minute, s=second.</span> </div></li>

<li><div style="text-align:justify;"><span style="font-size:11pt;">Format can be X+n, X-n, X=n or Xn where X+-n means adding/subtracting n to current date value, while X=n or Xn means setting exact value</span> </div></li>

<li><div style="text-align:justify;"><span style="font-size:11pt;">If one time specification is not set, it is based on the current date.</span> </div></li>

<li><div style="text-align:justify;"><span style="font-size:11pt;">If "-notbetween" is specified, the planned date must not be in the area.</span> </div></li>

<li><div style="text-align:justify;"><span style="font-size:11pt;">If "-between" is specified, the planned date must be found in any such specified areas (could be in any of the occurrence). If not specified, it only depends on "-notbetween".</span> </div></li>

<li><div style="text-align:justify;"><span style="font-size:11pt;">If none is specified, the planned date is always valid.</span> </div></li>

<li><div style="text-align:justify;"><span style="font-size:11pt;">In case start &gt; end, end will be +1 day</span> </div></li>

<li>
<div style="text-align:justify;"><span style="font-size:11pt;">In case start and end &lt; current planned date, both will have +1 day.</span></div></li></ul></li>


<li>
<div style="text-align:justify;"><span style="font-size:11pt;">"-count limit" will be the limit of retry. The value limit is taken from the "info on transfer". </span></div>
<ul>
<li><div style="text-align:justify;"><span style="font-size:11pt;">Each time this function is called, the limit value will be replaced as newlimit = limit - 1 in the "info of transfer".</span> </div></li>

<li><div style="text-align:justify;"><span style="font-size:11pt;">To ensure correctness, the value must be in the "info of transfer" since this value will be changed statically in the "info of transfer". However, a value must be setup in the rule in order to reset the value when the count reach 0.</span> </div></li>

<li>
<div style="text-align:justify;"><span style="font-size:11pt;">So in the rule, "-count resetlimit" must be present, where resetlimit will be the new value set when the limit reaches 0</span><span style="font-size:11pt;">. If&nbsp;it is missing, the condition is not applied. </span></div></li></ul></li></ul>
<p style="text-align:justify;"><span style="font-size:11pt;"><strong>Note:</strong> When the task is definitively in error (counter to 0), the counter in the transfer information is reset to the counter default limit set in the rule and the transfer is stopped. Then it is up to other way to relaunch the transfer to restart the transfer.</span></p>
<p style="text-align:justify;"><span style="font-size:11pt;">Among the various possibilities to relaunch a transfer once it is in error:</span></p>
<ul>
<li><div style="text-align:justify;"><span style="font-size:11pt;">Through the RESCHEDULE task, filtered by the error code and according to constraints and limits</span> </div></li>

<li><div style="text-align:justify;"><span style="font-size:11pt;">Through the Admin GUI (HTTPS): Transfer -&gt; Restart</span> </div></li>

<li><div style="text-align:justify;"><span style="font-size:11pt;">Through command line: RequestTransfer or SubmitTransfer</span> </div></li>

<li><div style="text-align:justify;"><span style="font-size:11pt;">Through API using Thrift: using transferRequestQuery method</span> </div></li>

<li>
<div style="text-align:justify;"><span style="font-size:11pt;">Through the database directly by changing the status of UPDATEDINFO to the value TOSUBMIT (3)</span></div></li></ul>
<p style="text-align:justify;"><span style="font-size:11pt;">Example of RESCHEDULE usage: </span></p>
<p style="text-align:justify;"><span style="font-size:11pt;">With the following rule:</span></p>
<ul>
<li>
<div style="text-align:justify;"><span style="font-size:11pt;">"-delay 3600000 -case ConnectionImpossible,ServerOverloaded,Shutdown -notbetween H7:m0:S0;H19:m0:S0 -notbetween H1:m0:S0;H=3:m0:S0 -count 1"</span></div></li></ul>
<p style="text-align:justify;"><span style="font-size:11pt;">The reschedule task means retry in case of error during initialization of connection in 1 hour if not between 7AM to 7PM and not between 1AM to 3AM and with a limit of 3 retries (retry will be reset to 1 in case of 3 attempts).</span></p>
<p style="text-align:justify;"></p>
<p style="text-align:justify;"></p>
<p style="text-align:justify;"></p>
<p style="text-align:justify;"></p>
<p style="text-align:justify;">&nbsp;</p></div></td></tr></tbody></table>
<div id="Comp7_CodeRelayer"><script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-1693657-4";
urchinTracker();
</script>
</div></div>
</body>
</html>
