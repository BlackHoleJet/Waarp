<!DOCTYPE html><!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang=""> <![endif]--><!--[if IE 7]> <html class="no-js lt-ie9 lt-ie8" lang=""> <![endif]--><!--[if IE 8]> <html class="no-js lt-ie9" lang=""> <![endif]--><!--[if gt IE 8]><!--> <html class="no-js" lang=""> <!--<![endif]-->
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="generator" content="Site Studio 6 (www.effectivestudios.com)" />
<meta name="keywords" content="bregier, fichier, file, frederic, gateway, goldengate, http, java, libre, moniteur, monitor, open, openr66, route, source, ssh, transfer, transfert, waarp" />
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1" />
<meta name="robots" content="index,follow" />
<meta name="description" content="Waarp project" />
<link rel="stylesheet" href="Waarp.css" type="text/css" />
<style type="text/css">
a {
	color:#0000FF;
	text-decoration:underline;
}
a:visited {
	text-decoration:underline;
}
a:hover {
	text-decoration:underline;
}
a img {
	border:#000000 0px none;
}
</style>
<title>Waarp - R66Definitions</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- Bootstrap CSS -->
<link rel="stylesheet" href="css/magic-bootstrap-min.css">
<!-- special CSS -->
<style type="text/css">
@-moz-document url-prefix() { fieldset { display: table-cell; } }
</style>
<!-- JQuery -->
<script type="text/javascript" src="js/jquery-1.11.2.min.js"></script>
<script src="js/modernizr-2.8.3-respond-1.4.2.min.js"></script>
<!-- Bootstrap -->
<script type="text/javascript" src="js/bootstrap.min.js"></script>
<link rel="stylesheet" href="Waarp.css" type="text/css" />
<script>
$( document ).ready(function(){
 $.get( "res/waarpmenu.html", function(data) {
 $( "#waarpmenu" ).html(data);
 $("body").removeAttr("class").removeAttr( "style" );
 $("#Comp2_sys_doctext").addClass("panel-body container-fluid");
 var curpage= "r660/r66howto0/r66wiki0/r66def";
 var splitPages = curpage.split("/");
 $.each( splitPages, function( index, value ){ $("#"+value).addClass("active"); });
  $('ul.dropdown-menu [data-toggle=dropdown]').on('click', function(event) {
   event.preventDefault(); 
   event.stopPropagation(); 
   $(this).parent().siblings().removeClass('open');
   $(this).parent().toggleClass('open');
  });
 });
});
</script>
<style type="text/css">
.dropdown-submenu{position:relative;}
.dropdown-submenu>.dropdown-menu{top:0;left:100%;margin-top:-6px;margin-left:-1px;-webkit-border-radius:0 6px 6px 6px;-moz-border-radius:0 6px 6px 6px;border-radius:0 6px 6px 6px;}
.dropdown-submenu>a:after{display:block;content:" ";float:right;width:0;height:0;border-color:transparent;border-style:solid;border-width:5px 0 5px 5px;border-left-color:#cccccc;margin-top:5px;margin-right:-10px;}
.dropdown-submenu:hover>a:after{border-left-color:#555;}
.dropdown-submenu.pull-left{float:none;}.dropdown-submenu.pull-left>.dropdown-menu{left:-100%;margin-left:10px;-webkit-border-radius:6px 0 6px 6px;-moz-border-radius:6px 0 6px 6px;border-radius:6px 0 6px 6px;}
.h1 { font-size:14px; color:#333333; font-weight:bold;}
.h2, .h3 { font-size:12pt; color:#333333; font-weight:bold; }
.h4, .h5, .h6 { font-size:13px; color:#333333; font-weight:bold; }
</style>
</head>
<body class="normal" style="font-family:Verdana,sans-serif;font-size:8pt;color:#000000;margin:0px;padding:0px;background-color:#FFFFFF;">
<div id="Comp1_CodeRelayer"><!--[if lt IE 8]>
<p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
<![endif]-->
<div class="cover" id="waarpmenu" />
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-1693657-4', 'auto');
  ga('send', 'pageview');

</script>
</div>
<div style="text-align:left;margin:0px 4px;">
<h1 class="h1">R66Definitions</h1>
<div id="Comp2_sys_doctext">
<h1 class="h1" style="text-align:justify;"><span style="font-size:11pt;">Some basic definitions and understanding</span></h1>
<p style="text-align:justify;"></p>




<p style="text-align:justify;"><span style="font-size:11pt;">Often one asks what are requests and tasks and how they are executed.</span></p>
<h2 class="h2" style="text-align:justify;"><span style="font-size:11pt;">1) What is client/server/heavy client</span></h2>
<p style="text-align:justify;"><span style="font-size:11pt;">First, you must understand that 2 types of partners exist: client and server.</span></p>
<blockquote style="margin-right:0px;" dir="ltr">
<p style="text-align:justify;"><strong><span style="font-size:11pt;">a) A client</span></strong></p></blockquote>
<p style="text-align:justify;"><span style="font-size:11pt;">A client can only be the source of a request (whatever the way, push or pull, send or recv). It cannot be the target of a request. This could be compared to a FTP client which can only initiate a connection, but cannot be the target of a new connection (a part from internal FTP protocol for Data between Passive or Active mode for instance).</span></p>
<blockquote style="margin-right:0px;" dir="ltr">
<p style="text-align:justify;"><strong><span style="font-size:11pt;">b) A server</span></strong></p></blockquote>
<p style="text-align:justify;"><span style="font-size:11pt;">A server can ask for new request (initiating a connection) or can be the target of a new request. However, contrary to a FTP server, it can initiate itself a request.</span></p>
<blockquote style="margin-right:0px;" dir="ltr">
<p style="text-align:justify;"><strong><span style="font-size:11pt;">c) An heavy client</span></strong></p></blockquote>
<p style="text-align:justify;"><span style="font-size:11pt;">An heavy client is like a client but with a "light" database, meaning that all its logs and management will be in the light database (H2 Database in Java). Note that this mode could be extended to a Server mode, using this database, as for "light" server.</span></p>
<h2 class="h2" style="text-align:justify;">&nbsp;</h2>
<h2 class="h2" style="text-align:justify;"><span style="font-size:11pt;">2) Who is the requester/requested</span></h2>
<p style="text-align:justify;"><span style="font-size:11pt;">For a request, we have two kinds of partners:</span></p>
<blockquote style="margin-right:0px;" dir="ltr">
<p style="text-align:justify;"><strong><span style="font-size:11pt;">a) the requester</span></strong></p>
<p style="text-align:justify;"><strong><span style="font-size:11pt;">b) the requested</span></strong></p></blockquote>
<p style="text-align:justify;"><span style="font-size:11pt;">When a request is initiated, the initiator (named requester) will try to connect to the requested (target). It tries 3 times with waiting time between, until it reaches the target. If the connection is not ok, then after 3 tries, the request is in error. We will see later on what happens then.</span></p>
<p style="text-align:justify;"><span style="font-size:11pt;">If the initiator is a client, the request can only be restarted from the client, since it cannot be the target of a new request (the client is not listening to any new request). That's the main reason why a stopped request can be restarted from initiator only. However, in some conditions, R66 protocol will try to restart a request even from the target, if the initiator is not a client and if it can in fact send a request of restart to this remote original requester partner.</span></p>
<p style="text-align:justify;"><span style="font-size:11pt;">Another reason for the requester to be the root of a restart in case of error, is that most of the time, this is where the request could have much more meanings, either in term of tasks to execute or in term of file preparation or responsability.</span></p>
<p style="text-align:justify;"><strong></strong>&nbsp;</p>
<h2 class="h2" style="text-align:justify;"><span style="font-size:11pt;">3) What are rule types</span></h2>
<p style="text-align:justify;"><span style="font-size:11pt;">Any request can be in <strong>SEND</strong> or <strong>RECV</strong> mode (push or pull).</span></p>
<p style="text-align:justify;"><span style="font-size:11pt;">This are the main drivers to know which tasks will be executed by who.</span></p>
<p style="text-align:justify;"><span style="font-size:11pt;">Once the request is initiated and both partners ok to do so, the sender (could be different than the requester) will execute Send tasks, while the other one will execute the Recv tasks. For a specific rule, if the rule is defined as a SEND mode, the requester will be the sender, while in the opposite if the rule is defined as a RECV mode, the requester will be the receiver.</span></p>
<p style="text-align:justify;"><span style="font-size:11pt;">Examples:</span></p>
<ul>
<li>
<div style="text-align:justify;"><span style="font-size:11pt;">Host A = requester of a request using a rule SEND</span></div></li>
<li>
<div style="text-align:justify;"><span style="font-size:11pt;">Host B = requested for the same request (defined also as SEND mode)</span></div></li></ul>
<p style="text-align:justify;"><span style="font-size:11pt;">The rule will be defined in both partners as follow:</span></p>
<ul>
<li>
<div style="text-align:justify;"><span style="font-size:11pt;">Mode = SEND</span></div></li>
<li>
<div style="text-align:justify;"><span style="font-size:11pt;">Recv tasks (pre/post/error) =&gt; will be executed by Host B</span></div></li>
<li>
<div style="text-align:justify;"><span style="font-size:11pt;">Send tasks (pre/post/error) =&gt; will be executed by Host A</span></div></li></ul>
<p style="text-align:justify;"><span style="font-size:11pt;">The opposite rule in RECV mode will be as follow:</span></p>
<ul>
<li>
<div style="text-align:justify;"><span style="font-size:11pt;">Mode = RECV</span></div></li>
<li>
<div style="text-align:justify;"><span style="font-size:11pt;">Recv tasks (pre/post/error) =&gt; will be executed by Host A</span></div></li>
<li>
<div style="text-align:justify;"><span style="font-size:11pt;">Send tasks (pre/post/error) =&gt; will be executed by Host B</span></div></li></ul>
<p style="text-align:justify;"><span style="font-size:11pt;">The independance of the configuration for server A and server B ensure that locally the rules are defined according the local needs. Note however that if the 2 servers share the same database for their respective configuration, they will share also the rule definitions and therefore the task definitions.</span></p>
<p style="text-align:justify;"><span style="font-size:11pt;">Using the local configuration information (local to each partner), as the directory configuration, the local resolution of variables (as host name, file name, ID, ...), it is therefore possible to share the very same rule definitions with several partners, while they will act differently locally. For instance, both partners could reference the very same name of external script, but those scripts will be different and adapted to the local context and therefore acting differently.</span></p>
<h2 class="h2" style="text-align:justify;">&nbsp;</h2>
<h2 class="h2" style="text-align:justify;"><span style="font-size:11pt;">4) What happens with the task</span></h2>
<p style="text-align:justify;"><span style="font-size:11pt;">Once the role of each partner is determine (sender or receiver), the tasks will be executed as follow:</span></p>
<p style="text-align:justify;"><span style="font-size:11pt;">a) Pre tasks on requested side b) Pre tasks on requester side c) File transfer d) Post tasks on receiver side e) Post tasks on sender side</span></p>
<p style="text-align:justify;"><span style="font-size:11pt;">In case of error, whatever the side, the error message is sent back to the partner and both sides execute the Error tasks.</span></p>
<h2 class="h2" style="text-align:justify;">&nbsp;</h2>
<h2 class="h2" style="text-align:justify;"><span style="font-size:11pt;">5) What are the synchronous/asynchronous mode</span></h2>
<p style="text-align:justify;"><span style="font-size:11pt;">Two modes are available:</span></p>
<ul>
<li>
<div style="text-align:justify;"><span style="font-size:11pt;"><strong>Synchronous</strong>: the requester will wait until the end of the transfer to finish the request operation</span></div></li>
<li>
<div style="text-align:justify;"><span style="font-size:11pt;"><strong>Asynchronous</strong>: the requester will just submit the request and forget it. It could check later on the result or using tasks to be informed back on the result on the request.</span></div></li></ul>
<p style="text-align:justify;"><span style="font-size:11pt;">For the asynchronous mode, the command line SubmitTransfer has to be used.</span></p>
<p style="text-align:justify;"><span style="font-size:11pt;">For the synchronous mode (or to come back to a synchronous operation once launched using asynchronous mode):</span></p>
<ul>
<li>
<div style="text-align:justify;"><span style="font-size:11pt;">Command: DirectTransfer</span></div></li>
<li>
<div style="text-align:justify;"><span style="font-size:11pt;">SubmirTransfer + RequestTransfer</span></div></li>
<li>
<div style="text-align:justify;"><span style="font-size:11pt;">SubmitTransfer + post operations to call back the caller of SubmitTransfer</span></div></li></ul>
<h2 class="h2" style="text-align:justify;"><span style="font-size:11pt;">6) What are the various usages of folders</span></h2>
<ul>
<li>
<div style="text-align:justify;"><span style="font-size:11pt;"><strong>Work</strong>: the directory where the temporary received file will be located (_can be specified per Rule_)</span></div></li>
<li>
<div style="text-align:justify;"><span style="font-size:11pt;"><strong>In</strong>: the directory where the received files will be placed once fully received (and before any post TASK) (_can be specified per Rule_)</span></div></li>
<li>
<div style="text-align:justify;"><span style="font-size:11pt;"><strong>Out</strong>: the directory where the to be sent files could be placed (before any pre TASK) if the path is relative (the out file can be specified with a full path, then ignoring the "Out" directory) (_can be specified per Rule_)</span></div></li>
<li>
<div style="text-align:justify;"><span style="font-size:11pt;"><strong>Arch</strong>: the directory where the archived files will be placed (for instance log or configuration export) (_can be specified per Rule_)</span></div></li>
<li>
<div style="text-align:justify;"><span style="font-size:11pt;"><strong>Conf</strong>: the directory where the configuration files for no-database client/server</span></div></li></ul>
<p style="text-align:justify;"></p>
<p style="text-align:justify;"></p>
<p style="text-align:justify;"></p>
<p style="text-align:justify;"></p>
<p style="text-align:justify;">&nbsp;</p></div>
<p>&nbsp;</p></div>
</body>
</html>
