<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="imagetoolbar" content="no" />
<meta name="keywords" content="bregier, fichier, file, frederic, gateway, goldengate, http, java, libre, moniteur, monitor, open, openr66, route, source, ssh, transfer, transfert, waarp" />
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1" />
<meta name="robots" content="index,follow" />
<meta name="generator" content="Site Studio 6 (www.effectivestudios.com)" />
<meta name="description" content="Waarp project" />
<link rel="stylesheet" href="Waarp.css" type="text/css" />
<style type="text/css">
a {
	color:#0000FF;
	text-decoration:none;
}
a:visited {
	text-decoration:none;
}
a:hover {
	text-decoration:underline;
}
a img {
	border:#000000 0px none;
}
</style>
<title>Waarp - Benchmarks</title>
	<script type="text/javascript">
//<![CDATA[
	function MHGetRef(str)
	{
		if(document.all)
			return document.all[str];
		else
			return document.getElementById(str);
	}

	function MHSwitchImage(strID, strFileName)
	{
		var obj = MHGetRef(strID);
		if(obj == null || obj + "" == "undefined") return;
		obj.src = strFileName;
	}
//]]>
	</script>
<script type="text/javascript">
//<![CDATA[
	function mvgGetRef(str)						{ return (document.all) ? document.all[str] : document.getElementById(str); }
	function mvgSetClass(strId, strClass)		{ var obj = mvgGetRef(strId); if(obj != null && typeof(obj) != "undefined") obj.className = strClass; }
	function mvgSwitchImage(strId, strFileName)	{ var obj = mvgGetRef(strId); if(obj != null && typeof(obj) != "undefined") obj.src = strFileName; }
//]]>
</script>
</head>
<body class="normal" style="margin:0px;padding:0px;background-color:#FFFFFF;background-image:url(gre/gre8104.png);background-position:left top;background-repeat:repeat-y;">
<div style="text-align:left;">
<div style="background-color:#EF6D00;text-align:left;"><a href="index.html"><img title="GoldenGate" style="border:none;" height="49" alt="GoldenGate" src="res/openlsd/waarp.jpg" width="74" /></a><img title="Waarp" style="border-top-style:none; border-bottom:#000000 0px solid; border-right-style:none; border-left-style:none;" height="40" alt="Waarp" src="gre/gre8105.png" width="99" /></div>
<div style="border-right:none;border-left:none;border-bottom:2px solid #FFFFFF;border-top:1px solid #FFFFFF;background-color:#F9DEC7;text-align:left;"><table cellpadding="0" cellspacing="0" border="0" style="width:100%;margin:0;padding:0;border:0 solid none;"><tr><td style="vertical-align:top;"><div></div></td><td style="height:1px;width:1px;margin:0;padding:0;border:0 solid none;"><div style="height:1px;width:1px;margin:0;padding:0;border:0 solid none;"></div></td></tr></table></div>
<table style="border:none;" cellspacing="0" cellpadding="0" width="100%">
<tbody>
<tr>
<td style="vertical-align:top;width:100px;background-color:#FFFFFF;">&nbsp;</td>
<td style="padding-right:5px;padding-left:5px;padding-bottom:0px;vertical-align:top;width:100%;padding-top:0px;">
<div id="Comp4_MenuHorizontal">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
	<tr style="background-image:url(gre/gre8073.png);background-repeat:repeat-x;background-position:left top;">
		<td id="MH1_0"><a href="WaarpFTPConfiguration.html" onmouseover="MHSwitchImage('MH1_0_img', 'gre/gre8141.png');" onmouseout="MHSwitchImage('MH1_0_img', 'gre/gre8140.png');"><img id="MH1_0_img" src="gre/gre8140.png" width="183" height="26" alt="Waarp-FTP-Configuration" style="border:none;display:block;" /></a></td>
		<td></td><td><img src="gre/gre8072.png" height="18" width="1" style="border:none;display:block;" alt="" /></td><td></td>
		<td id="MH1_1"><img id="MH1_1_img" src="gre/gre8143.png" width="114" height="26" alt="Benchmarks" style="border:none;display:block;" /></td>
		<td style="width:100%;"><img src="img/space.gif" width="1" height="1" style="border:none;display:block;" alt="" /></td>
	<td><img src="gre/gre8073.png" height="26" width="1" style="border:none;display:block;" alt="" /></td>
	</tr>
</table>
</div></td></tr>
<tr>
<td style="vertical-align:top;width:100px;">
<div id="Comp6_MenuVertical" style="text-align:left;"><div id="mvg1"><a href="index.html" onmouseover="mvgSwitchImage('mvg1_0_img', 'gre/gre8076.png');" onmouseout="mvgSwitchImage('mvg1_0_img', 'gre/gre8074.png');"><img id="mvg1_0_img" src="gre/gre8074.png" width="150" height="31" alt="Home" style="display:block;border:none;" /></a>
<a href="WorldofWaarp.html" onmouseover="mvgSwitchImage('mvg1_1_img', 'gre/gre8079.png');" onmouseout="mvgSwitchImage('mvg1_1_img', 'gre/gre8077.png');"><img id="mvg1_1_img" src="gre/gre8077.png" width="150" height="31" alt="World of Waarp" style="display:block;border:none;" /></a>
<a href="WaarpR66.html" onmouseover="mvgSwitchImage('mvg1_2_img', 'gre/gre8082.png');" onmouseout="mvgSwitchImage('mvg1_2_img', 'gre/gre8080.png');"><img id="mvg1_2_img" src="gre/gre8080.png" width="150" height="31" alt="Waarp R66" style="display:block;border:none;" /></a>
<a href="WaarpFTP.html" onmouseover="mvgSwitchImage('mvg1_3_img', 'gre/gre8085.png');" onmouseout="mvgSwitchImage('mvg1_3_img', 'gre/gre8084.png');"><img id="mvg1_3_img" src="gre/gre8084.png" width="150" height="31" alt="Waarp FTP" style="display:block;border:none;" /></a>
<a href="WaarpGatewayFtp.html" onmouseover="mvgSwitchImage('mvg1_4_img', 'gre/gre8088.png');" onmouseout="mvgSwitchImage('mvg1_4_img', 'gre/gre8086.png');"><img id="mvg1_4_img" src="gre/gre8086.png" width="150" height="31" alt="WaarpGatewayFtp" style="display:block;border:none;" /></a>
<a href="WaarpGatewayHttp.html" onmouseover="mvgSwitchImage('mvg1_5_img', 'gre/gre8091.png');" onmouseout="mvgSwitchImage('mvg1_5_img', 'gre/gre8089.png');"><img id="mvg1_5_img" src="gre/gre8089.png" width="150" height="31" alt="WaarpGatewayHttp" style="display:block;border:none;" /></a>
<a href="WaarpCommons.html" onmouseover="mvgSwitchImage('mvg1_6_img', 'gre/gre8094.png');" onmouseout="mvgSwitchImage('mvg1_6_img', 'gre/gre8092.png');"><img id="mvg1_6_img" src="gre/gre8092.png" width="150" height="31" alt="Waarp Commons" style="display:block;border:none;" /></a>
<a href="APIReferences.html" onmouseover="mvgSwitchImage('mvg1_7_img', 'gre/gre8097.png');" onmouseout="mvgSwitchImage('mvg1_7_img', 'gre/gre8095.png');"><img id="mvg1_7_img" src="gre/gre8095.png" width="150" height="31" alt="API References" style="display:block;border:none;" /></a>
<a href="Downloads.html" onmouseover="mvgSwitchImage('mvg1_8_img', 'gre/gre8100.png');" onmouseout="mvgSwitchImage('mvg1_8_img', 'gre/gre8098.png');"><img id="mvg1_8_img" src="gre/gre8098.png" width="150" height="31" alt="Downloads" style="display:block;border:none;" /></a>
<a href="WaarpDependson.html" onmouseover="mvgSwitchImage('mvg1_9_img', 'gre/gre8103.png');" onmouseout="mvgSwitchImage('mvg1_9_img', 'gre/gre8101.png');"><img id="mvg1_9_img" src="gre/gre8101.png" width="150" height="31" alt="Waarp Depends on" style="display:block;border:none;" /></a>
</div></div></td>
<td style="padding-right:5px;padding-left:5px;padding-bottom:5px;vertical-align:top;width:100%;padding-top:5px;">
<h1 class="h1">Benchmarks</h1>
<div id="Comp1_sys_doctext"><p style="text-align:justify;"><span style="font-size:11pt;"><span style="font-family:Arial;">From version 1.0.6 (2009), Benchmarks were done on 2 Intel Xeon Blade servers in one Blade Center. Each Blade is 2 Xeon </span><span style="font-family:Arial;">Dual Core 1.66 Ghz with 4 GB of memory with a 1 Gb lan connection, one using as client simulator, </span><span style="font-family:Arial;">the other one as server. Clients were realized using the Apache Net Ftp Client library.</span></span></p>
<p style="text-align:justify;">&nbsp;</p>
<p style="text-align:justify;"><span style="font-family:Arial;font-size:11pt;">All tests were done using the IBM JDK 1.6.</span></p>
<p style="text-align:justify;">&nbsp;</p>
<p style="text-align:justify;">&nbsp;</p>
<p style="text-align:justify;">&nbsp;</p>
<p style="text-align:justify;"><span style="font-size:11pt;"><span style="font-family:Arial;">The first benchmark is about only Control Connection. It computes how many connections by </span><span style="font-family:Arial;">second GoldenGateFtp server can allow, starting from 1 virtual user up to 1000 virtual users.</span></span></p>
<p style="text-align:justify;">&nbsp;</p>
<p style="text-align:justify;"><span style="font-size:11pt;"><span style="font-family:Arial;">The result is on a single 2-Xeon server, the GoldenGateFtp Server allows up to almost </span><span style="font-family:Arial;">500 connections/second. </span></span></p>
<p style="text-align:justify;">&nbsp;</p>
<p style="text-align:justify;"></p>
<p style="text-align:center;"><span style="font-family:Arial;font-size:11pt;"><strong><img title="connections" alt="connections" src="res/bench/connections.png" width="945" height="562" /></strong></span></p>
<p style="text-align:justify;"><span style="font-family:Arial;font-size:11pt;"><strong>Connections Benchmark</strong></span></p>
<p style="text-align:justify;">&nbsp;</p>
<p style="text-align:justify;"><span style="font-size:11pt;"><span style="font-family:Arial;">The second benchmark is about transfer capacity on small files (1024 bytes only). Each user </span><span style="font-family:Arial;">will try to transfer 100 times one file of 1024 bytes in one ways (store and retrieve), </span><span style="font-family:Arial;">so that each virtual users will do 100 transfers operations sequentially. We start from 1 </span><span style="font-family:Arial;">user up to 1000 users. We test both passive (client connect to the server for the data </span><span style="font-family:Arial;">connection) and active (server connects to the client for the data connection) modes.</span></span></p>
<p style="text-align:justify;"><span style="font-family:Arial;"><img title="bench-1k" alt="bench-1k" src="res/bench/bench1k.png" width="980" height="566" /></span></p>
<p style="text-align:justify;"></p>
<p style="text-align:justify;"><span style="font-size:11pt;"></span>&nbsp;</p>
<p style="text-align:justify;"><span style="font-size:11pt;"><span style="font-family:Arial;">The result is on a single 2-Xeon server, the GoldenGateFtp Server allows up to 1400&nbsp;RETRieve </span><span style="font-family:Arial;">by second in active mode and up to 900 <span style="font-family:arial;">RETRieve</span> by second in passive mode with 100 virtual </span><span style="font-family:Arial;">users. The difference </span><span style="font-family:Arial;">is mainly due to the need in passive mode to made a special synchronization since the </span><span style="font-family:Arial;">data connection will be initiated by the client on a port defined on the server, but as </span><span style="font-family:Arial;">this port could be used by many clients at the same time, there are some extra check to correctly </span><span style="font-family:Arial;">assign this data connection to the correct control connection. </span></span></p>
<p style="text-align:justify;">&nbsp;</p>
<p style="text-align:justify;"><span style="font-family:Arial;font-size:11pt;">In STORe like transfers, the result are generally a bit slower due to the disk contentions. In previous version, we observed a serious contention on write access due to JAVA way to write files using FileChannel or RandomAccessFile. We found out that FileOutputStream coupled with RandomAccessFile were the best result we can have, so this new version.</span></p>
<p style="text-align:justify;">&nbsp;</p>
<p style="text-align:justify;"><span style="font-family:Arial;font-size:11pt;">Note that on this benchmarks, Bandwidth are in 0.01Mbits (10Kbits) for graphical reasons, which means that a value of 400 means 4 Mbits, so we reach almost 11 Mbits.</span></p>
<p style="text-align:justify;"><span style="font-family:Arial;font-size:11pt;"><img title="bench-10k" alt="bench-10k" src="res/bench/bench10k.png" width="985" height="560" /></span></p>
<p style="text-align:justify;"></p>
<p style="text-align:center;"><span style="font-family:Arial;font-size:11pt;"></span></p><span style="font-family:Arial;"><strong>
<p style="text-align:justify;"><span style="font-family:arial; font-size:11pt;">Note that on this benchmarks, Bandwidth are in 0.1Mbits (100Kbits) for graphical reasons, which means that a value of 400 means 40 Mbits.</span></p>
<p style="text-align:justify;"><span style="font-family:Arial;font-size:11pt;">Here, as the files is bigger (10 KB), the transfers are not so immediate when we have 100 Virtual Users (VU), therefore the operations sustained almost 110 Mbits.</span></p>
<p style="text-align:justify;"><span style="font-family:Arial;font-size:11pt;">But you can notice that with 1000 VU, the results are going down for the STORe operations, since this time concurrent writings can occurs more frequently due to the number of clients (around&nbsp;70 Mbits maximum).</span></p>
<p style="text-align:justify;"><span style="font-family:Arial;font-size:11pt;">However, for RETRieve operations, the number of transfers is still around 1400 transfers/s and now around 110 Mbits.</span></p></strong></span>
<p style="text-align:center;"></p>
<p style="text-align:justify;"><span style="font-family:Arial;font-size:11pt;"></span>&nbsp;</p>
<p style="text-align:justify;"><span style="font-family:Arial;font-size:11pt;"><img title="bench-100vu" alt="bench-100vu" src="res/bench/bench100vu.png" width="986" height="567" /></span></p>
<p style="text-align:justify;"><span style="font-size:11pt;"><span style="font-family:Arial;">The third benchmark is about the global bandwidth usage. Since with 100 users and 100 transfers </span><span style="font-family:Arial;">in both ways we get the higher performance, we start from this set and increase the file size </span><span style="font-family:Arial;">from 1024 bytes up to 1 024 000 bytes</span><span style="font-family:Arial;">. The bandwitdh this time are in Mbits.</span></span></p>
<p style="text-align:justify;">&nbsp;</p>
<p style="text-align:justify;"><span style="font-size:11pt;"><span style="font-family:Arial;">The result is on a single 2-Xeon server, the GoldenGateFtp Server allows to use up to 90% </span><span style="font-family:Arial;">of the available bandwidth (here 0.9 Gb were used on a 1 Gb local network). Note that obviously </span><span style="font-family:Arial;">the number of transfer/second is going down when the file size is going up. At 1024 bytes, we reached </span><span style="font-family:Arial;">up to 1400 transfers/s</span><span style="font-family:Arial;">.</span></span></p>
<p style="text-align:justify;"><span style="font-family:Arial;font-size:11pt;">Again we can see the difference between Passive and Active protocol, and the disk write contention effect on STORe operations (around 850 Mbits at most on write).</span></p>
<p style="text-align:justify;">&nbsp;</p>
<p style="text-align:justify;"></p>
<p style="text-align:center;"><span style="font-family:Arial;font-size:11pt;"></span></p>
<p style="text-align:center;"><strong></strong>&nbsp;</p>
<p style="text-align:justify;"><span style="font-family:Arial;font-size:11pt;">Finally, a benchmark on GoldenGateFTP Exec was made using R66PreparedTransfer and Execute commands&nbsp;with the same conditions. </span></p>
<p style="text-align:justify;"><span style="font-family:Arial;font-size:11pt;">The post execution limits the global performances since </span></p>
<ul>
<li><div class="normal" style="text-align:justify;"><span style="font-family:Arial;font-size:11pt;">R66PreparedTransfer implies some synchronization and gives up to 110 transfer+R66PreparedTransfer / second, </span></div></li>

<li>
<div class="normal" style="text-align:justify;"><span style="font-family:Arial;font-size:11pt;">Execute relies on the availability of the JVM to execute external commands, which is limited up to 50 transfer/Execute / second, while simple benchrmaks show that the JVM was at most capable of 60 external execution / second.</span></div></li></ul>
<p style="text-align:justify;">&nbsp;</p></div></td></tr></tbody></table>
<div id="Comp7_CodeRelayer"><script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-1693657-4";
urchinTracker();
</script>
</div></div>
</body>
</html>
