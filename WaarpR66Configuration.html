<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="robots" content="index,follow" />
<meta name="keywords" content="bregier, fichier, file, frederic, gateway, goldengate, http, java, libre, moniteur, monitor, open, openr66, route, source, ssh, transfer, transfert, waarp" />
<meta name="description" content="Waarp project" />
<meta name="generator" content="Site Studio 6 (www.effectivestudios.com)" />
<meta http-equiv="imagetoolbar" content="no" />
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1" />
<link rel="stylesheet" href="Waarp.css" type="text/css" />
<style type="text/css">
a {
	color:#0000FF;
	text-decoration:none;
}
a:visited {
	text-decoration:none;
}
a:hover {
	text-decoration:underline;
}
a img {
	border:#000000 0px none;
}
</style>
<title>Waarp - Waarp R66-Configuration</title>
	<script type="text/javascript">
//<![CDATA[
	function MHGetRef(str)
	{
		if(document.all)
			return document.all[str];
		else
			return document.getElementById(str);
	}

	function MHSwitchImage(strID, strFileName)
	{
		var obj = MHGetRef(strID);
		if(obj == null || obj + "" == "undefined") return;
		obj.src = strFileName;
	}
//]]>
	</script>
<script type="text/javascript">
//<![CDATA[
	function mvgGetRef(str)						{ return (document.all) ? document.all[str] : document.getElementById(str); }
	function mvgSetClass(strId, strClass)		{ var obj = mvgGetRef(strId); if(obj != null && typeof(obj) != "undefined") obj.className = strClass; }
	function mvgSwitchImage(strId, strFileName)	{ var obj = mvgGetRef(strId); if(obj != null && typeof(obj) != "undefined") obj.src = strFileName; }
//]]>
</script>
</head>
<body class="normal" style="margin:0px;padding:0px;background-color:#FFFFFF;background-image:url(gre/gre6696.png);background-position:left top;background-repeat:repeat-y;">
<div style="text-align:left;">
<div style="background-color:#EF6D00;text-align:left;"><a href="index.html"><img title="GoldenGate" style="border:none;" height="49" alt="GoldenGate" src="res/openlsd/waarp.jpg" width="74" /></a><img title="Waarp" style="border-top-style:none; border-bottom:#000000 0px solid; border-right-style:none; border-left-style:none;" height="40" alt="Waarp" src="gre/gre6697.png" width="99" /></div>
<div style="border-right:none;border-left:none;border-bottom:2px solid #FFFFFF;border-top:1px solid #FFFFFF;background-color:#F9DEC7;text-align:left;"><table cellpadding="0" cellspacing="0" border="0" style="width:100%;margin:0;padding:0;border:0 solid none;"><tr><td style="vertical-align:top;"><div></div></td><td style="height:1px;width:1px;margin:0;padding:0;border:0 solid none;"><div style="height:1px;width:1px;margin:0;padding:0;border:0 solid none;"></div></td></tr></table></div>
<table style="border:none;" cellspacing="0" cellpadding="0" width="100%">
<tbody>
<tr>
<td style="vertical-align:top;width:100px;background-color:#FFFFFF;">&nbsp;</td>
<td style="padding-right:5px;padding-left:5px;padding-bottom:0px;vertical-align:top;width:100%;padding-top:0px;">
<div id="Comp4_MenuHorizontal">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
	<tr style="background-image:url(gre/gre6668.png);background-repeat:repeat-x;background-position:left top;">
		<td id="MH1_0"><a href="WaarpR66Presentation.html" onmouseover="MHSwitchImage('MH1_0_img', 'gre/gre6707.png');" onmouseout="MHSwitchImage('MH1_0_img', 'gre/gre6706.png');"><img id="MH1_0_img" src="gre/gre6706.png" width="179" height="26" alt="Waarp R66-Presentation" style="border:none;display:block;" /></a></td>
		<td></td><td><img src="gre/gre6667.png" height="18" width="1" style="border:none;display:block;" alt="" /></td><td></td>
		<td id="MH1_1"><a href="WaarpR66Technical.html" onmouseover="MHSwitchImage('MH1_1_img', 'gre/gre6709.png');" onmouseout="MHSwitchImage('MH1_1_img', 'gre/gre6708.png');"><img id="MH1_1_img" src="gre/gre6708.png" width="159" height="26" alt="Waarp R66-Technical" style="border:none;display:block;" /></a></td>
		<td></td><td><img src="gre/gre6667.png" height="18" width="1" style="border:none;display:block;" alt="" /></td><td></td>
		<td id="MH1_2"><a href="WaarpR66Installation.html" onmouseover="MHSwitchImage('MH1_2_img', 'gre/gre6711.png');" onmouseout="MHSwitchImage('MH1_2_img', 'gre/gre6711.png');"><img id="MH1_2_img" src="gre/gre6711.png" width="190" height="26" alt="Waarp R66-Installation" style="border:none;display:block;" /></a></td>
		<td></td><td><img src="gre/gre6667.png" height="18" width="1" style="border:none;display:block;" alt="" /></td><td></td>
		<td id="MH1_3"><a href="WaarpR66Production.html" onmouseover="MHSwitchImage('MH1_3_img', 'gre/gre6713.png');" onmouseout="MHSwitchImage('MH1_3_img', 'gre/gre6712.png');"><img id="MH1_3_img" src="gre/gre6712.png" width="167" height="26" alt="Waarp R66-Production" style="border:none;display:block;" /></a></td>
		<td style="width:100%;"><img src="img/space.gif" width="1" height="1" style="border:none;display:block;" alt="" /></td>
	<td><img src="gre/gre6668.png" height="26" width="1" style="border:none;display:block;" alt="" /></td>
	</tr>
</table>
</div></td></tr>
<tr>
<td style="vertical-align:top;width:100px;">
<div id="Comp6_MenuVertical" style="text-align:left;"><div id="mvg1"><a href="index.html" onmouseover="mvgSwitchImage('mvg1_0_img', 'gre/gre6671.png');" onmouseout="mvgSwitchImage('mvg1_0_img', 'gre/gre6669.png');"><img id="mvg1_0_img" src="gre/gre6669.png" width="150" height="31" alt="Home" style="display:block;border:none;" /></a>
<a href="WorldofWaarp.html" onmouseover="mvgSwitchImage('mvg1_1_img', 'gre/gre6674.png');" onmouseout="mvgSwitchImage('mvg1_1_img', 'gre/gre6672.png');"><img id="mvg1_1_img" src="gre/gre6672.png" width="150" height="31" alt="World of Waarp" style="display:block;border:none;" /></a>
<a href="WaarpR66.html" onmouseover="mvgSwitchImage('mvg1_2_img', 'gre/gre6677.png');" onmouseout="mvgSwitchImage('mvg1_2_img', 'gre/gre6676.png');"><img id="mvg1_2_img" src="gre/gre6676.png" width="150" height="31" alt="Waarp R66" style="display:block;border:none;" /></a>
<a href="WaarpFTP.html" onmouseover="mvgSwitchImage('mvg1_3_img', 'gre/gre6725.png');" onmouseout="mvgSwitchImage('mvg1_3_img', 'gre/gre6723.png');"><img id="mvg1_3_img" src="gre/gre6723.png" width="150" height="31" alt="Waarp FTP" style="display:block;border:none;" /></a>
<a href="WaarpGatewayFtp.html" onmouseover="mvgSwitchImage('mvg1_4_img', 'gre/gre6731.png');" onmouseout="mvgSwitchImage('mvg1_4_img', 'gre/gre6729.png');"><img id="mvg1_4_img" src="gre/gre6729.png" width="150" height="31" alt="WaarpGatewayFtp" style="display:block;border:none;" /></a>
<a href="WaarpGatewayHttp.html" onmouseover="mvgSwitchImage('mvg1_5_img', 'gre/gre6737.png');" onmouseout="mvgSwitchImage('mvg1_5_img', 'gre/gre6735.png');"><img id="mvg1_5_img" src="gre/gre6735.png" width="150" height="31" alt="WaarpGatewayHttp" style="display:block;border:none;" /></a>
<a href="WaarpCommons.html" onmouseover="mvgSwitchImage('mvg1_6_img', 'gre/gre6722.png');" onmouseout="mvgSwitchImage('mvg1_6_img', 'gre/gre6720.png');"><img id="mvg1_6_img" src="gre/gre6720.png" width="150" height="31" alt="Waarp Commons" style="display:block;border:none;" /></a>
<a href="APIReferences.html" onmouseover="mvgSwitchImage('mvg1_7_img', 'gre/gre6689.png');" onmouseout="mvgSwitchImage('mvg1_7_img', 'gre/gre6687.png');"><img id="mvg1_7_img" src="gre/gre6687.png" width="150" height="31" alt="API References" style="display:block;border:none;" /></a>
<a href="Downloads.html" onmouseover="mvgSwitchImage('mvg1_8_img', 'gre/gre6692.png');" onmouseout="mvgSwitchImage('mvg1_8_img', 'gre/gre6690.png');"><img id="mvg1_8_img" src="gre/gre6690.png" width="150" height="31" alt="Downloads" style="display:block;border:none;" /></a>
<a href="WaarpDependson.html" onmouseover="mvgSwitchImage('mvg1_9_img', 'gre/gre6695.png');" onmouseout="mvgSwitchImage('mvg1_9_img', 'gre/gre6693.png');"><img id="mvg1_9_img" src="gre/gre6693.png" width="150" height="31" alt="Waarp Depends on" style="display:block;border:none;" /></a>
</div></div></td>
<td style="padding-right:5px;padding-left:5px;padding-bottom:5px;vertical-align:top;width:100%;padding-top:5px;">
<h1 class="h1">Waarp R66-Configuration</h1>
<div id="Comp1_sys_doctext"><p style="text-align:justify;"><span style="font-size:11pt;">To configure a Waarp R66 Server, you need to first create the XML files as needed (</span><a href="WaarpR66XmlConfiguration.html"><span style="font-size:11pt;">see the Xml Config files page</span></a><span style="font-size:11pt;">): main config file, authent file, rules and limit config files. To help the administrator to generate correct files, XSD models are defined to be used with an extension of the project <a href="javascript:var EffectiveNewWin = window.open('http://www.felixgolubov.com/XMLEditor/','_blank','directories,location,menubar,resizable,scrollbars,status,toolbar'); EffectiveNewWin.focus();">Xample (XML Gui Editor) from Felix Golubov</a>.</span></p>
<p style="text-align:justify;">&nbsp;</p>
<p style="text-align:center;"><img style="border:none;" title="xample-config" alt="xample-config" src="res/openr66/xampleconfig.png" width="630" height="535" /></p>
<p style="text-align:justify;">&nbsp;</p>
<p style="text-align:justify;"><span style="font-size:11pt;">Then, you create a database entry in the model you choose (currently supported is Oracle, PostGreSQL, MySQL and H2 Database). This database entry should be referenced in the XML config files. Below is presented the schema of the database that will be created.</span></p>
<p style="text-align:center;"><img style="width:949px;height:547px;" title="openr66-database" alt="openr66-database" src="res/openr66/openr66database.png" width="1149" height="628" /></p>
<p style="text-align:justify;">&nbsp;</p>
<p style="text-align:justify;"><span style="font-size:11pt;">You need to get all the necessary jar (see the depencies of the project) to allow you to launch the server. An example of shell script including all jar is presented in the src/main/example directory.</span></p>
<p style="text-align:justify;">&nbsp;</p>
<p style="text-align:justify;"><span style="font-size:11pt;">Then you launch the ServerInitDatabase.</span></p>
<p style="text-align:justify;">&nbsp;</p>
<p style="text-align:justify;"><span style="font-size:11pt;"><strong>Note that multiple Waarp R66 Servers may shared the exactly same database</strong>. Waarp R66 is compatible with such a model. Note however that Rules are strictly shared, which means that you will need to take care of the absolute path of EXEC commands such that they are valid on all Waarp R66 servers where it should be executed.</span></p>
<p style="text-align:justify;">&nbsp;</p>
<p style="text-align:justify;"><span style="font-size:11pt;"><strong>Cryptography</strong></span></p>
<p style="text-align:justify;"><span style="font-size:11pt;">For the administrator you need a KeyStore containing a RSA key for SSL support in HTTPS and a specific DES Key for the crypted password support. DES crypted support and generation are available through the GoldenGate Password GUI project. </span></p>
<p style="text-align:justify;">&nbsp;</p>
<p style="text-align:center;"><img title="pwdgui2" alt="pwdgui2" src="res/openr66/pwdgui2.png" width="400" height="300" /></p>
<p style="text-align:justify;">&nbsp;</p>
<p style="text-align:justify;"><span style="font-size:11pt;">You need another KeyStore for the SSL support in the Waarp R66 protocol, but only if you want to use this SSL channel. </span></p>
<p style="text-align:justify;"><span style="font-size:11pt;">If you don't want that OpenR66 uses SSL between two hosts, then you only need one KeyStore for the HTTPS support.</span></p>
<p style="text-align:justify;">&nbsp;</p>
<p style="text-align:justify;"><span style="font-size:11pt;">In the source, you will find in the certs directory 2 such keystore named admin66.store and openr66.store. You can named the files as you wanted (using the standard "jks" extension for instance).</span></p>
<p style="text-align:justify;"><span style="font-size:11pt;">To generate those files, you can also ue the keytool command from the jdk, or using the cool free tool KeyTool IUI (last known version in 2.4.1).</span></p>
<ul>
<li><div style="text-align:justify;"><span style="font-size:11pt;">keypath&nbsp;for OpenR66 channels (admkeypath for administrator) is the full or relative path to the keystore file</span></div></li>

<li><div style="text-align:justify;"><span style="font-size:11pt;">keystorepass (admkeystorepass) is the password for the keystore</span></div></li>

<li>
<div style="text-align:justify;"><span style="font-size:11pt;">keypass (admkeypass) is the password for the key</span></div></li></ul>
<p style="text-align:justify;"><span style="font-size:11pt;">For instance: keytool -genkey -alias myalias -keyalg RSA -validity xxx -keystore mystore.store</span></p>
<p style="text-align:justify;">&nbsp;</p>
<p style="text-align:justify;"><span style="font-size:11pt;">Below you will find the full detail on how to create those KeyStore and TrustedKeyStore according to your needs:</span></p>
<p style="text-align:justify;">&nbsp;</p>
<p style="text-align:justify;"><span style="font-size:11pt;">To generate the stores for Waarp R66 for instance, you need to create 2 JKS keyStore. To generate those files, you can use the "<ins>keytool</ins>" command from the JDK or using the free tool KeyTool IUI (last known version in 2.4.1). Below we show how to use the <strong><ins>Keytool</ins> IUI.</strong></span></p>
<ul>
<li><div style="text-align:justify;"><span style="font-size:11pt;"><strong>For SSL connection without authentication of clients</strong></span></div><ul>
<li><div style="text-align:justify;"><span style="font-size:11pt;"><strong><em>Server side (also valid for Administration HTTPS site)</em></strong></span></div><ul>
<li><div style="text-align:justify;"><span style="font-size:11pt;">Create one <ins>jks</ins> KeyStore (server.jks) with one Private Key Version 3 using RSA algorithm.</span></div></li>

<li><div style="text-align:justify;"><span style="font-size:11pt;">Use this KeyStore as KeyStore for the Server.</span></div></li>

<li>
<div style="text-align:justify;"><span style="font-size:11pt;">To do that, suing KeyTool IUI:</span></div>
<ol>
<li><div style="text-align:justify;"><span style="font-size:11pt;">Create an empty KeyStore</span></div></li>

<li>
<div style="text-align:justify;"><span style="font-size:11pt;">Create a Private Key Version 3 with RSA algorithm added to this KeyStore</span></div></li></ol></li></ul></li>


<li>
<div style="text-align:justify;"><span style="font-size:11pt;"><strong><em>Client side</em></strong></span></div>
<ul>
<li><div style="text-align:justify;"><span style="font-size:11pt;">Create one <ins>jks</ins> TrustStore (clientTrust.jks) with the Certificate Chain of the Server Key from the Server as a Regular Certificate.</span></div></li>

<li><div style="text-align:justify;"><span style="font-size:11pt;">Use this KeyStore as <ins>Trustore</ins> for the Client.</span></div></li>

<li>
<div style="text-align:justify;"><span style="font-size:11pt;">To do that, using KeyTool IUI:</span></div>
<ol>
<li><div style="text-align:justify;"><span style="font-size:11pt;">From the Server <ins>Keytore</ins>, export Private Key (2 files with one Certificate Chain)</span></div></li>

<li><div style="text-align:justify;"><span style="font-size:11pt;">Create one <ins>jks</ins> TrustStore (Empty KeyStore)</span></div></li>

<li>
<div style="text-align:justify;"><span style="font-size:11pt;">Import the Trusted Certificate as Regular Certificate (Certificate Chain as .<ins>der</ins> file)</span></div></li></ol></li></ul></li></ul></li>


<li>
<div style="text-align:justify;"><span style="font-size:11pt;"><strong>For SSL connection with authentication of clients</strong></span></div>
<ul>
<li><div style="text-align:justify;"><span style="font-size:11pt;"><em>First do as without authentication of clients for the server authentication side</em>: </span><span style="font-size:11pt;">server.jks for the Server's KeyStore and clientTrust.jks for the Client's TrustStore.</span></div></li>

<li>
<div style="text-align:justify;"><span style="font-size:11pt;">Handle the reverse authentication of multiples clients within the server</span></div>
<ul>
<li><div style="text-align:justify;"><span style="font-size:11pt;"><strong><em>Client side</em></strong></span></div><ul>
<li><div style="text-align:justify;"><span style="font-size:11pt;">Create one <ins>jks</ins> KeyStore with one Private Key Version 3 using RSA algorithm for each Client (client1.<ins>jks</ins>, client2.<ins>jks</ins>, clientn.jks).</span></div></li>

<li><div style="text-align:justify;"><span style="font-size:11pt;">Use this KeyStore as KeyStore for the Client.</span></div></li>

<li>
<div style="text-align:justify;"><span style="font-size:11pt;">To do that, suing KeyTool IUI:</span></div>
<ol>
<li><div style="text-align:justify;"><span style="font-size:11pt;">Create an empty KeyStore</span></div></li>

<li>
<div style="text-align:justify;"><span style="font-size:11pt;">Create a Private Key Version 3 with RSA algorithm added to this KeyStore</span></div></li></ol></li></ul></li>


<li>
<div style="text-align:justify;"><span style="font-size:11pt;"><strong><em>Server side</em></strong></span></div>
<ul>
<li><div style="text-align:justify;"><span style="font-size:11pt;">Create one <ins>jks</ins> TrustStore (serverTrust.jks) with the Certificate Chain of the Client Key from the Client as a Regular Certificate.</span></div></li>

<li><div style="text-align:justify;"><span style="font-size:11pt;">Use this KeyStore as <ins>Trustore</ins> for the Server.</span></div></li>

<li>
<div style="text-align:justify;"><span style="font-size:11pt;">To do that, using KeyTool IUI:</span></div>
<ol>
<li><div style="text-align:justify;"><span style="font-size:11pt;">Create one <ins>jks</ins> TrustStore (Empty KeyStore)</span></div></li>

<li><div style="text-align:justify;"><span style="font-size:11pt;">From the Client <ins>Keytore</ins>, export Private Key (2 files with one Certificate Chain)</span></div></li>

<li><div style="text-align:justify;"><span style="font-size:11pt;">Import the Trusted Certificate as Regular Certificate (Certificate Chain as .<ins>der</ins> file)</span></div></li>

<li>
<div style="text-align:justify;"><span style="font-size:11pt;">Import all Trusted Certificates as with 2 and 3 in the same TrustStore</span></div></li></ol></li></ul></li></ul></li></ul></li></ul>
<p style="text-align:justify;">&nbsp;</p>
<p style="text-align:justify;"><span style="font-size:11pt;">Then you have to fill the ports to use (serverssl port for Waarp R66 channels, serverhttpsport for the administrator) and to set up the good path to every components (don't forget the path to the html admin files).</span></p>
<p style="text-align:justify;">&nbsp;</p>
<p style="text-align:justify;"><span style="font-size:11pt;">Now you can launch the Waarp R66 Server.</span></p></div></td></tr></tbody></table>
<div id="Comp7_CodeRelayer"><script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-1693657-4";
urchinTracker();
</script>
</div></div>
</body>
</html>
