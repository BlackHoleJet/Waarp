<!DOCTYPE html><!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang=""> <![endif]--><!--[if IE 7]> <html class="no-js lt-ie9 lt-ie8" lang=""> <![endif]--><!--[if IE 8]> <html class="no-js lt-ie9" lang=""> <![endif]--><!--[if gt IE 8]><!--> <html class="no-js" lang=""> <!--<![endif]-->
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="robots" content="index,follow" />
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1" />
<meta name="generator" content="Site Studio 6 (www.effectivestudios.com)" />
<meta name="description" content="Waarp project" />
<meta name="keywords" content="bregier, fichier, file, frederic, gateway, goldengate, http, java, libre, moniteur, monitor, open, openr66, route, source, ssh, transfer, transfert, waarp" />
<link rel="stylesheet" href="Waarp.css" type="text/css" />
<style type="text/css">
a {
	color:#0000FF;
	text-decoration:underline;
}
a:visited {
	text-decoration:underline;
}
a:hover {
	text-decoration:underline;
}
a img {
	border:#000000 0px none;
}
</style>
<title>Waarp - Waarp R66-Configuration</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- Bootstrap CSS -->
<link rel="stylesheet" href="css/magic-bootstrap-min.css">
<!-- special CSS -->
<style type="text/css">
@-moz-document url-prefix() { fieldset { display: table-cell; } }
</style>
<!-- JQuery -->
<script type="text/javascript" src="js/jquery-1.11.2.min.js"></script>
<script src="js/modernizr-2.8.3-respond-1.4.2.min.js"></script>
<!-- Bootstrap -->
<script type="text/javascript" src="js/bootstrap.min.js"></script>
<link rel="stylesheet" href="Waarp.css" type="text/css" />
<script>
$( document ).ready(function(){
 $.get( "res/waarpmenu.html", function(data) {
 $( "#waarpmenu" ).html(data);
 $("body").removeAttr("class").removeAttr( "style" );
 $("#Comp2_sys_doctext").addClass("panel-body container-fluid");
 var curpage= "r660/install0/config";
 var splitPages = curpage.split("/");
 $.each( splitPages, function( index, value ){ $("#"+value).addClass("active"); });
  $('ul.dropdown-menu [data-toggle=dropdown]').on('click', function(event) {
   event.preventDefault(); 
   event.stopPropagation(); 
   $(this).parent().siblings().removeClass('open');
   $(this).parent().toggleClass('open');
  });
 });
});
</script>
<style type="text/css">
.dropdown-submenu{position:relative;}
.dropdown-submenu>.dropdown-menu{top:0;left:100%;margin-top:-6px;margin-left:-1px;-webkit-border-radius:0 6px 6px 6px;-moz-border-radius:0 6px 6px 6px;border-radius:0 6px 6px 6px;}
.dropdown-submenu>a:after{display:block;content:" ";float:right;width:0;height:0;border-color:transparent;border-style:solid;border-width:5px 0 5px 5px;border-left-color:#cccccc;margin-top:5px;margin-right:-10px;}
.dropdown-submenu:hover>a:after{border-left-color:#555;}
.dropdown-submenu.pull-left{float:none;}.dropdown-submenu.pull-left>.dropdown-menu{left:-100%;margin-left:10px;-webkit-border-radius:6px 0 6px 6px;-moz-border-radius:6px 0 6px 6px;border-radius:6px 0 6px 6px;}
.h1 { font-size:14px; color:#333333; font-weight:bold;}
.h2, .h3 { font-size:12pt; color:#333333; font-weight:bold; }
.h4, .h5, .h6 { font-size:13px; color:#333333; font-weight:bold; }
</style>
</head>
<body class="normal" style="font-family:Verdana,sans-serif;font-size:8pt;color:#000000;margin:0px;padding:0px;background-color:#FFFFFF;">
<div id="Comp1_CodeRelayer"><!--[if lt IE 8]>
<p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
<![endif]-->
<div class="cover" id="waarpmenu" />
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-1693657-4', 'auto');
  ga('send', 'pageview');

</script>
</div>
<div style="text-align:left;margin:0px 4px;">
<h1 class="h1">Waarp R66-Configuration</h1>
<div id="Comp2_sys_doctext"><p style="text-align:justify;"><span style="font-size:11pt;">The primary installation of a server is done using the following steps:</span></p>
<p style="text-align:justify;">&nbsp;</p>
<table style="border:none;width:90%;" cellspacing="1" cellpadding="1">
<tbody>
<tr>
<td style="width:90%;" valign="top">
<blockquote style="margin-right:0px;" dir="ltr">
<p style="text-align:justify;"><span style="font-size:10pt;"><strong>1) Download the "All Jars Waarp R66" package</strong> from </span><a href="Downloads.html"><span style="font-size:10pt;">Downloads page</span></a></p></blockquote></td></tr>
<tr>
<td valign="top">
<blockquote style="margin-right:0px;" dir="ltr">
<p style="text-align:justify;"><span style="font-size:10pt;">2) </span><a href="WaarpR66Configuration.html#XML"><strong><span style="font-size:10pt; color:#0000ff;">Create the XML configuration files</span></strong></a><span style="font-size:10pt;"><strong> (Server, Limit, Rule, Authent, SNMP).</strong> The minimal configuration is Server and Authent (eventually limited to the created server). An example of various configuration files can be found in the </span><a href="http://sourceforge.net/projects/waarp/files/AllJars/WaarpR66-example-config.zip/download"><span style="font-size:10pt;">"Waarp R66 Configuration example"</span></a><span style="font-size:10pt;"> package. This package is an example and MUST be adapted to your needs. You can also have a look to the page </span><a href="WaarpR66Options.html"><span style="font-size:10pt;">Waarp R66-Options</span></a><span style="font-size:10pt;">, which explains some specific options.</span></p></blockquote></td></tr>
<tr>
<td valign="top">
<blockquote style="margin-right:0px;" dir="ltr">
<p style="text-align:justify;"><span style="font-size:10pt;">3) </span><a href="WaarpR66Configuration.html#PWD"><strong><span style="font-size:10pt; color:#0000ff;">Create the necessary GGP (GoldenGate Password files)</span></strong></a><span style="font-size:10pt;"> using the des Key generated both by Waarp Password</span></p></blockquote></td></tr>
<tr>
<td valign="top">
<blockquote style="margin-right:0px;" dir="ltr">
<p style="text-align:justify;"><span style="font-size:10pt;">4) </span><a href="WaarpR66Configuration.html#SSL"><strong><span style="font-size:10pt; color:#0000ff;">Create the necessary SSL KeyStore</span></strong></a><span style="font-size:10pt;"> for the HTTPS Administration interface and another one for the SSL server authentication (server only, or server AND client, depending on your choices)</span></p></blockquote></td></tr>
<tr>
<td valign="top">
<blockquote style="margin-right:0px;" dir="ltr">
<p style="text-align:justify;"><span style="font-size:10pt;"><strong>5) Create the database</strong> (dependent on the one choose between Oracle, PostgreSql, MySQL/MariaDB or H2 database, the initial creation is out of this documentation). <strong>We strongly recommend to use either PostgreSql or H2 Database</strong>, since MySQL and MariaDB show some issues on client side using JDBC in multithreading case.</span></p></blockquote></td></tr>
<tr>
<td valign="top">
<blockquote style="margin-right:0px;" dir="ltr">
<p style="text-align:justify;"><span style="font-size:10pt;"><strong>6) Adapt the example scripts that helps to launch the Waarp commands and services</strong> (in <strong>example/</strong> then according to your OS: Linux, Unix, Windows). In particular <strong>for Linux and Unix, the file ENV_R66</strong> shall be adapted to your installation, while <strong>for Windows, it is the setvari.bat</strong>. Note also that<strong> for Services</strong> (Waarp R66 or Waarp SpooledDirectory service), one should adapt the files found in <strong>/example/service</strong> (Waarp R66) and /example/servicespooled (SpooledDirectory).</span></p></blockquote></td></tr>
<tr>
<td valign="top">
<blockquote style="margin-right:0px;" dir="ltr">
<p style="text-align:justify;"><span style="font-size:10pt;">7) </span><a href="WaarpR66Configuration.html#DB"><strong><span style="font-size:10pt; color:#0000ff;">Initialize the database</span></strong></a><span style="font-size:10pt;"> (once created and the user/password and the JDBC access fill in the Server configuration XML file)</span></p></blockquote></td></tr>
<tr>
<td valign="top">
<blockquote style="margin-right:0px;" dir="ltr">
<p style="text-align:justify;"><span style="font-size:10pt;">8) </span><a href="WaarpR66Configuration.html#LOG"><strong><span style="font-size:10pt; color:#0000ff;">Create the logback.xml</span></strong></a><span style="font-size:10pt;"> file according to your need (to setup for instance the level of trace from DEBUG to WARN). See the logback.xml example or the </span><a href="http://logback.qos.ch/"><span style="font-size:10pt;">LogBack web site</span></a><span style="font-size:10pt;">.</span></p></blockquote></td></tr>
<tr>
<td valign="top">
<blockquote style="margin-right:0px;" dir="ltr">
<p style="text-align:justify;"><span style="font-size:10pt;">9) Now you can run the server and use the various commands or Administration interface to continue the configuration (Limit, Rule, Authent). Note that </span><a href="WaarpR66Configuration.html#JVMOPT"><span style="font-size:10pt;">some specific options</span></a><span style="font-size:10pt;"> can be passed when launching the commands (see at the end the "-Dopenr66.*" options).</span></p></blockquote></td></tr>
<tr>
<td valign="top">
<blockquote style="margin-right:0px;" dir="ltr">
<p><span style="font-size:10pt;">10) Note that commands can also have a special extra argument: the output format as one of </span></p></blockquote>
<ul>
<li>
<ul>
<li><p style="text-align:justify;"><span style="font-size:10pt;"><strong>-csv </strong>: output will be as one line for the title, one line for the data, all fields separated by ';'</span></p></li>

<li><p style="text-align:justify;"><span style="font-size:10pt;"><strong>-property</strong> : output will be one value per line, as name=value</span></p></li>

<li><p style="text-align:justify;"><span style="font-size:10pt;"><strong>-xml</strong> : output will be in XML format</span></p></li>

<li><p style="text-align:justify;"><span style="font-size:10pt;"><strong>-json</strong> : output will be in JSON format (default)</span></p></li>

<li>
<p style="text-align:justify;"><span style="font-size:10pt;"><strong>-quiet</strong> : no output will be done (only logging)</span></p></li></ul></li></ul></td></tr></tbody></table>
<p style="text-align:justify;">&nbsp;</p>
<p style="text-align:justify;"><span style="font-size:11pt;">Below those several steps are illustrated.</span></p>
<blockquote style="margin-right:0px;" dir="ltr">
<p style="text-align:justify;"><span style="font-size:11pt;"><strong>Note that the various tools are consolidated into one GUI&nbsp;named : </strong><a href="R66AdministratorGui.html"><strong>Central Administrator</strong></a><strong> (Xml Editor, Password, R66Gui) plus some other functions.</strong></span></p></blockquote>
<p style="text-align:justify;">&nbsp;</p>
<p style="text-align:justify;">&nbsp;</p>
<h1 class="h1" style="text-align:justify;"><a name="XML"></a><span style="font-size:11pt;">2) XML Configuration</span></h1>
<blockquote style="margin-right:0px;" dir="ltr">
<p style="text-align:justify;"><span style="font-size:10pt;">To configure a Waarp R66 Server, you need to first create the XML files as needed (</span><a href="WaarpR66XmlConfiguration.html"><span style="font-size:10pt;">see the Xml Config files page</span></a><span style="font-size:10pt;">): main config file, authent file, rules and limit config files. To help the administrator to generate correct files, XSD models are defined to be used with an extension of the project </span><a href="javascript:var EffectiveNewWin = window.open('http://www.felixgolubov.com/XMLEditor/','_blank','directories,location,menubar,resizable,scrollbars,status,toolbar'); EffectiveNewWin.focus();"><span style="font-size:10pt;">Xample (XML Gui Editor) from Felix Golubov</span></a><span style="font-size:10pt;">.</span></p>
<p style="text-align:justify;"><span style="font-size:10pt;">Note that the <strong>httpadmin</strong> shall specify the correct path for your choice of Waarp HTTPS/HTTP administrator/supervision tool. Now the default is i18n&nbsp;support based.</span></p>
<p style="text-align:justify;">&nbsp;</p>
<p style="text-align:center;"><img title="xample-config" style="border:none;" alt="xample-config" src="res/openr66/xampleconfig.png" width="630" height="535" /></p>
<p style="text-align:justify;">&nbsp;</p>
<p style="text-align:justify;"><strong><span style="font-size:10pt;">It is also possible to use </span><a href="http://jaxe.sourceforge.net/en/"><span style="font-size:10pt;">JAXE</span></a><span style="font-size:10pt;"> with jaxe-xxx-config.xml files.</span></strong></p></blockquote>
<p style="text-align:justify;">&nbsp;</p>
<p style="text-align:justify;">&nbsp;</p>
<h1 class="h1" style="text-align:justify;"><a name="PWD"></a><span style="font-size:11pt;">3) Password configuration</span></h1>
<blockquote style="margin-right:0px;" dir="ltr">
<p style="text-align:justify;"><span style="font-size:11pt;"><span style="font-size:10pt;">For the administrator you need a specific DES Key for the crypted password support. DES crypted support and generation are available through the GoldenGate Password GUI project.</span> </span></p></blockquote>
<p style="text-align:justify;">&nbsp;</p>
<p style="text-align:center;"><img title="pwdgui2" alt="pwdgui2" src="res/openr66/pwdgui2.png" width="400" height="300" /></p>
<p style="text-align:justify;">&nbsp;</p>
<blockquote style="margin-right:0px;" dir="ltr">
<p style="text-align:justify;"><strong><span style="font-size:10pt;">Note that under Mainframe, some people reports that adding -Dfile.encoding=UTF8 fixes some issues with passwords.</span></strong></p></blockquote>
<h2 class="h2" style="text-align:justify;">&nbsp;</h2>
<h1 class="h1" style="text-align:justify;"><a name="SSL"></a><span style="font-size:11pt;">4) Cryptography</span></h1>
<blockquote style="margin-right:0px;" dir="ltr">
<p style="text-align:justify;"><span style="font-size:10pt;">For the administrator you need a KeyStore containing a RSA key for SSL support in HTTPS. </span></p>
<p style="text-align:justify;">&nbsp;</p>
<p style="text-align:justify;"><span style="font-size:10pt;">You need another KeyStore for the SSL support in the Waarp R66 protocol, but only if you want to use this SSL channel. </span></p>
<p style="text-align:justify;"><span style="font-size:10pt;">If you don't want that OpenR66 uses SSL between two hosts, then you only need one KeyStore for the HTTPS support.</span></p>
<p style="text-align:justify;">&nbsp;</p>
<p style="text-align:justify;"><span style="font-size:10pt;">In the source, you will find in the certs directory 2 such keystore named admin66.store and openr66.store. You can named the files as you wanted (using the standard "jks" extension for instance).</span></p>
<p style="text-align:justify;"><span style="font-size:10pt;">To generate those files, you can also ue the keytool command from the jdk, or using the cool free tool KeyTool IUI (last known version in 2.4.1).</span></p>
<ul>
<li><div style="text-align:justify;"><span style="font-size:10pt;">keypath&nbsp;for OpenR66 channels (admkeypath for administrator) is the full or relative path to the keystore file</span></div></li>

<li><div style="text-align:justify;"><span style="font-size:10pt;">keystorepass (admkeystorepass) is the password for the keystore</span></div></li>

<li>
<div style="text-align:justify;"><span style="font-size:10pt;">keypass (admkeypass) is the password for the key</span></div></li></ul>
<p style="text-align:justify;"><span style="font-size:10pt;">For instance: keytool -genkey -alias myalias -keyalg RSA -validity xxx -keystore mystore.store</span></p>
<p style="text-align:justify;">&nbsp;</p>
<p style="text-align:justify;"><span style="font-size:10pt;">Below you will find the full detail on how to create those KeyStore and TrustedKeyStore according to your needs:</span></p>
<p style="text-align:justify;">&nbsp;</p>
<p style="text-align:justify;"><span style="font-size:10pt;">To generate the stores for Waarp R66 for instance, you need to create 2 JKS keyStore. To generate those files, you can use the "<ins>keytool</ins>" command from the JDK or using the free tool KeyTool IUI (last known version in 2.4.1). Below we show how to use the <strong><ins>Keytool</ins> IUI.</strong></span></p>
<ul>
<li><div style="text-align:justify;"><strong><span style="font-size:10pt;">For SSL connection without authentication of clients</span></strong></div><ul>
<li><div style="text-align:justify;"><strong><em><span style="font-size:10pt;">Server side (also valid for Administration HTTPS site)</span></em></strong></div><ul>
<li><div style="text-align:justify;"><span style="font-size:10pt;">Create one <ins>jks</ins> KeyStore (server.jks) with one Private Key Version 3 using RSA algorithm.</span></div></li>

<li><div style="text-align:justify;"><span style="font-size:10pt;">Use this KeyStore as KeyStore for the Server.</span></div></li>

<li>
<div style="text-align:justify;"><span style="font-size:10pt;">To do that, suing KeyTool IUI:</span></div>
<ol>
<li><div style="text-align:justify;"><span style="font-size:10pt;">Create an empty KeyStore</span></div></li>

<li>
<div style="text-align:justify;"><span style="font-size:10pt;">Create a Private Key Version 3 with RSA algorithm added to this KeyStore</span></div></li></ol></li></ul></li>


<li>
<div style="text-align:justify;"><strong><em><span style="font-size:10pt;">Client side</span></em></strong></div>
<ul>
<li><div style="text-align:justify;"><span style="font-size:10pt;">Create one <ins>jks</ins> TrustStore (clientTrust.jks) with the Certificate Chain of the Server Key from the Server as a Regular Certificate.</span></div></li>

<li><div style="text-align:justify;"><span style="font-size:10pt;">Use this KeyStore as <ins>Trustore</ins> for the Client.</span></div></li>

<li>
<div style="text-align:justify;"><span style="font-size:10pt;">To do that, using KeyTool IUI:</span></div>
<ol>
<li><div style="text-align:justify;"><span style="font-size:10pt;">From the Server <ins>Keytore</ins>, export Private Key (2 files with one Certificate Chain)</span></div></li>

<li><div style="text-align:justify;"><span style="font-size:10pt;">Create one <ins>jks</ins> TrustStore (Empty KeyStore)</span></div></li>

<li>
<div style="text-align:justify;"><span style="font-size:10pt;">Import the Trusted Certificate as Regular Certificate (Certificate Chain as .<ins>der</ins> file)</span></div></li></ol></li></ul></li></ul></li>


<li>
<div style="text-align:justify;"><strong><span style="font-size:10pt;">For SSL connection with authentication of clients</span></strong></div>
<ul>
<li><div style="text-align:justify;"><span style="font-size:10pt;"><em>First do as without authentication of clients for the server authentication side</em>: server.jks for the Server's KeyStore and clientTrust.jks for the Client's TrustStore.</span></div></li>

<li>
<div style="text-align:justify;"><span style="font-size:10pt;">Handle the reverse authentication of multiples clients within the server</span></div>
<ul>
<li><div style="text-align:justify;"><strong><em><span style="font-size:10pt;">Client side</span></em></strong></div><ul>
<li><div style="text-align:justify;"><span style="font-size:10pt;">Create one <ins>jks</ins> KeyStore with one Private Key Version 3 using RSA algorithm for each Client (client1.<ins>jks</ins>, client2.<ins>jks</ins>, clientn.jks).</span></div></li>

<li><div style="text-align:justify;"><span style="font-size:10pt;">Use this KeyStore as KeyStore for the Client.</span></div></li>

<li>
<div style="text-align:justify;"><span style="font-size:10pt;">To do that, suing KeyTool IUI:</span></div>
<ol>
<li><div style="text-align:justify;"><span style="font-size:10pt;">Create an empty KeyStore</span></div></li>

<li>
<div style="text-align:justify;"><span style="font-size:10pt;">Create a Private Key Version 3 with RSA algorithm added to this KeyStore</span></div></li></ol></li></ul></li>


<li>
<div style="text-align:justify;"><strong><em><span style="font-size:10pt;">Server side</span></em></strong></div>
<ul>
<li><div style="text-align:justify;"><span style="font-size:10pt;">Create one <ins>jks</ins> TrustStore (serverTrust.jks) with the Certificate Chain of the Client Key from the Client as a Regular Certificate.</span></div></li>

<li><div style="text-align:justify;"><span style="font-size:10pt;">Use this KeyStore as <ins>Trustore</ins> for the Server.</span></div></li>

<li>
<div style="text-align:justify;"><span style="font-size:10pt;">To do that, using KeyTool IUI:</span></div>
<ol>
<li><div style="text-align:justify;"><span style="font-size:10pt;">Create one <ins>jks</ins> TrustStore (Empty KeyStore)</span></div></li>

<li><div style="text-align:justify;"><span style="font-size:10pt;">From the Client <ins>Keytore</ins>, export Private Key (2 files with one Certificate Chain)</span></div></li>

<li><div style="text-align:justify;"><span style="font-size:10pt;">Import the Trusted Certificate as Regular Certificate (Certificate Chain as .<ins>der</ins> file)</span></div></li>

<li>
<div style="text-align:justify;"><span style="font-size:10pt;">Import all Trusted Certificates as with 2 and 3 in the same TrustStore</span></div></li></ol></li></ul></li></ul></li></ul></li></ul>
<p style="text-align:justify;">&nbsp;</p>
<p style="text-align:justify;"><span style="font-size:10pt;">Then you have to fill the ports to use (serverssl port for Waarp R66 channels, serverhttpsport for the administrator) and to set up the good path to every components (don't forget the path to the html admin files, between <em>admin</em> or <em>admin2</em> - the second&nbsp;being more dynamic - ).</span></p></blockquote>
<p style="text-align:justify;">&nbsp;</p>
<h1 class="h1" style="text-align:justify;"><a name="DB"></a><span style="font-size:11pt;">7) Database configuration</span></h1>
<blockquote style="margin-right:0px;" dir="ltr">
<p style="text-align:justify;"><span style="font-size:10pt;">Then, you create a database entry in the model you choose (currently supported is Oracle, PostGreSQL, MySQL and H2 Database). This database entry should be referenced in the XML config files. Below is presented the schema of the database that will be created.</span></p>
<p style="text-align:center;"><span style="font-size:10pt;"><img title="openr66-database" style="height:547px;width:949px;" alt="openr66-database" src="res/openr66/openr66database.png" width="1149" height="628" /></span></p>
<p style="text-align:justify;"></p>
<p style="text-align:justify;"><span style="font-size:10pt;">You need to get all the necessary jar (see the depencies of the project) to allow you to launch the server. An example of shell script including all jar is presented in the src/main/example directory.</span></p>
<p style="text-align:justify;"></p>
<p style="text-align:justify;">&nbsp;</p>
<p style="text-align:justify;"><span style="font-size:10pt;">Then you launch the <strong><em>ServerInitDatabase</em></strong>.</span></p></blockquote>
<p style="text-align:justify;">&nbsp;</p>
<p style="text-align:justify;"></p>
<blockquote style="margin-right:0px;" dir="ltr">
<p style="text-align:justify;"><span style="font-size:10pt;"><strong>Note that multiple Waarp R66 Servers may shared the exactly same database</strong>. Waarp R66 is compatible with such a model. Note however that Rules are strictly shared, which means that you will need to take care of the absolute path of EXEC commands such that they are valid on all Waarp R66 servers where it should be executed.</span></p>
<p style="text-align:justify;"><span style="font-size:10pt;">Note also that from version 2.4.17, it is possible to update the database schema using <strong><em>ServerInitDatabase -updateDb</em></strong>.</span></p></blockquote>
<p style="text-align:justify;">&nbsp;</p>
<h1 class="h1" style="text-align:justify;"><a name="LOG"></a><span style="font-size:11pt;">8) Example of logback.xml file</span></h1>
<blockquote style="margin-right:0px;" dir="ltr">
<p style="text-align:justify;"><span style="font-family:Courier New;font-size:10pt;">&lt;configuration&gt;</span></p>
<p style="text-align:justify;"><span style="font-family:Courier New;font-size:10pt;">&nbsp; &lt;appender name="FILE"<br />&nbsp;&nbsp;&nbsp; class="ch.qos.logback.core.rolling.RollingFileAppender"&gt;<br />&nbsp;&nbsp;&nbsp; &lt;file&gt;/GG/R66/log/R66Server.log&lt;/file&gt;<br />&nbsp;&nbsp;&nbsp; &lt;append&gt;true&lt;/append&gt;<br />&nbsp;&nbsp;&nbsp; &lt;rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy"&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;fileNamePattern&gt;/GG/R66/log/R66Server.%d{yyyy-MM-dd}.%i.log.zip&lt;/fileNamePattern&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;maxHistory&gt;30&lt;/maxHistory&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;timeBasedFileNamingAndTriggeringPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP"&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;maxFileSize&gt;10MB&lt;/maxFileSize&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/timeBasedFileNamingAndTriggeringPolicy&gt;<br />&nbsp;&nbsp;&nbsp; &lt;/rollingPolicy&gt;</span></p>
<p style="text-align:justify;"><span style="font-family:Courier New;font-size:10pt;">&nbsp;&nbsp;&nbsp; &lt;encoder class="ch.qos.logback.classic.encoder.PatternLayoutEncoder"&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;pattern&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; %date{dd/MM/yyyy/HH:mm:ss.SSS} %level [%logger] [%thread] %msg%n<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/pattern&gt;<br />&nbsp;&nbsp;&nbsp; &lt;/encoder&gt;<br />&nbsp; &lt;/appender&gt;</span></p>
<p style="text-align:justify;"><span style="font-family:Courier New;font-size:10pt;">&nbsp; &lt;appender name="STDOUT"<br />&nbsp;&nbsp;&nbsp; class="ch.qos.logback.core.ConsoleAppender"&gt;<br />&nbsp;&nbsp;&nbsp; &lt;encoder class="ch.qos.logback.classic.encoder.PatternLayoutEncoder"&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;Pattern&gt;%date{dd/MM/yyyy/HH:mm:ss.SSS} %level [%logger] [%thread] %msg%n&lt;/Pattern&gt;<br />&nbsp;&nbsp;&nbsp; &lt;/encoder&gt;<br />&nbsp; &lt;/appender&gt;<br />&nbsp; <br />&nbsp; &lt;root&gt;<br />&nbsp;&nbsp;&nbsp; &lt;level value="warn" /&gt;<br />&nbsp;&nbsp;&nbsp; &lt;appender-ref ref="FILE" /&gt;<br />&nbsp;&nbsp;&nbsp; &lt;appender-ref ref="STDOUT" /&gt;<br />&nbsp; &lt;/root&gt;<br />&lt;/configuration&gt;</span></p>
<p style="text-align:justify;"><span style="font-size:10pt;">And use the -Dlogback.configurationFile=J:/GG/R66/conf/logback.xml as argument to the java command (before the class to launch, roughly were you put the -Xms -Xmx arguments).</span></p></blockquote>
<p style="text-align:justify;">&nbsp;</p>
<h1 class="h1" style="text-align:justify;"><a name="JVMOPT"></a><span style="font-size:11pt;">9) Extra Waarp JVM Options</span></h1>
<blockquote style="margin-right:0px;" dir="ltr">
<p><span style="font-size:10pt;">Moreover, several options can be placed in the command line (preferably in ENV_R66 or setvari.bat): </span></p>
<ul>
<li><div style="text-align:justify;"><span style="font-size:10pt;"><strong>-Dopenr66.locale=en|fr</strong> to choose between english or french default language (note: not all elements are translated, only the more relevant)</span></div></li>

<li><div style="text-align:justify;"><span style="font-size:10pt;"><strong>-Dopenr66.ishostproxyfied=1|0</strong> to set that this host is proxyfied (using R66Proxy), such that eventual IP check will not apply to it (since the IP will be the one from the proxy)</span></div></li>

<li><div style="text-align:justify;"><span style="font-size:10pt;"><strong>-Dopenr66.startup.warning=1|0</strong> to choose if warning at startup should be printed or not (useful for client where those warning are not real issues but information)</span></div></li>

<li><div style="text-align:justify;">
<p style="text-align:justify;"><span style="font-size:10pt;"><strong>-Dopenr66.startup.checkdb=1|0</strong> to choose if&nbsp;database configuration shall be checked at startup (default is true)</span></p></div></li>

<li><div style="text-align:justify;"><span style="font-size:10pt;"><strong>-Dopenr66.chroot.checked=1|0</strong> to choose if all rules will have to be respected in terms of chroot. For instance, trying to get a file (RECV) from a remote partner, while specifying a full path might be allowed, even if outside OUT directory, except if checked=1. Then all files must be under (immediately or in subdirectories) the OUT directory.</span></div></li>

<li><div style="text-align:justify;"><span style="font-size:10pt;"><strong>-Dopenr66.blacklist.badauthent=1|0</strong> to choose if a server that will have a bad authentification will be put as black listed (no more allowed for a while), to prevent DOS. if OPENR66_ISHOSTPROXYFIED is true, then is mandatory false). Note that this must not be true if several partners might have the same IP (proxyfied for instance), since they will all be banned</span></div></li>

<li><div style="text-align:justify;">
<p><span style="font-size:10pt;"><strong>-Dopenr66.filename.maxlength=n</strong> (default n = 255) to choose the default max filename length used when receiving a file (for the temporary filename and final filename). This does not prevent to change the filename after (and #ORIGINALFILENAME# does still contain the full filename, untroncated).</span></p></div></li>

<li><div style="text-align:justify;">
<p><span style="font-size:10pt;"><strong>-Dopenr66.trace.stats=n</strong> (default n=0) to debug by making a trace of some specific data structure&nbsp;usages every&nbsp;n s, where&nbsp;n is specify as value in the definition. If 0 or less, means not activated.</span></p></div></li>

<li>
<div style="text-align:justify;">
<p><span style="font-size:10pt;"><strong>-Dopenr66.cache.limit=n</strong> and <strong>-Dopenr66.cache.timelimit=m</strong> (default n=20000, m=180000 - 180s -) to manage the cache behavior of Transfer informations&nbsp;with </span></p></div>
<ul>
<li><div style="text-align:justify;">
<p><span style="font-size:10pt;">n being the maximum number of DbTaskRunners to keep in LRU cache (used in self request and for instance without database) -&nbsp;Minimal value is 100 -</span></p></div></li>

<li>
<div style="text-align:justify;">
<p><span style="font-size:10pt;">m being the maximum time in ms of valid element once created, used or updated (used in self request and for instance without database). -&nbsp;Minimal value is 1000 ms (1s). If set to 1000, the value will not be regularly&nbsp;cleaned of outtimed values&nbsp;but the cache will be filled up to n. -</span></p></div></li></ul></li></ul>
<p style="text-align:justify;"><span style="font-size:10pt;">Now you can launch the Waarp R66 Server.</span></p>
<p style="text-align:justify;">&nbsp;</p>
<p style="text-align:justify;"><span style="font-size:10pt;">Note that you can&nbsp;add specific user rights with specific authentication to access to the Web administrator interface from version 2.4.22 (</span><a href="WaarpR66WebAdministration.html"><span style="font-size:10pt;">see here</span></a><span style="font-size:10pt;">), in addition to the super user specified in the XML configuration file of the server.</span></p></blockquote>
<p style="text-align:justify;">&nbsp;</p></div>
<p>&nbsp;</p></div>
</body>
</html>
